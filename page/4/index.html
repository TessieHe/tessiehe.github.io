<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wangdongdong122.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="从爪印判断，这是头雄狮">
<meta property="og:type" content="website">
<meta property="og:title" content="凛冬将至">
<meta property="og:url" content="http://wangdongdong122.github.io/page/4/index.html">
<meta property="og:site_name" content="凛冬将至">
<meta property="og:description" content="从爪印判断，这是头雄狮">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Dongdong Wang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://wangdongdong122.github.io/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>凛冬将至</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">凛冬将至</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">从简单的例子开始</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2020/04/19/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/pandas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/19/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/pandas/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-19 18:24:34" itemprop="dateCreated datePublished" datetime="2020-04-19T18:24:34+08:00">2020-04-19</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h1 id="python调用shell"><a href="#python调用shell" class="headerlink" title="python调用shell"></a>python调用shell</h1><p>在python程序中调用shell命令，是件很酷且常用的事情……</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/pengdonglin137/articles/8093409.html">https://www.cnblogs.com/pengdonglin137/articles/8093409.html</a></p>
<h2 id="os-system-command"><a href="#os-system-command" class="headerlink" title="os.system(command)"></a>os.system(command)</h2><p>  此函数会启动子进程，在子进程中执行command，并返回command命令执行完毕后的退出状态，如果command有执行内容，会在标准输出显示。这实际上是使用C标准库函数system()实现的。</p>
<blockquote>
<p>缺点：这个函数在执行command命令时需要重新打开一个终端，并且无法保存command命令的执行结果。<br>实例：os.system(‘ls -l *’)</p>
<h2 id="os-popen-command-mode"><a href="#os-popen-command-mode" class="headerlink" title="os.popen(command,mode)"></a>os.popen(command,mode)</h2></blockquote>
<p>打开一个与command进程之间的管道。这个函数的返回值是一个文件对象，可以读或者写(由mode决定，mode默认是’r’)。如果mode为’r’，可以使用此函数的返回值调用read()来获取command命令的执行结果。</p>
<p>os.system(cmd)或os.popen(cmd)，前者返回值是脚本的退出状态码，后者的返回值是脚本执行过程中的输出内容。实际使用时视需求情况而选择。</p>
<p>实例：tmp = os.popen(‘ls -l *’).readlines()</p>
<h1 id="同时写入多个sheet"><a href="#同时写入多个sheet" class="headerlink" title="同时写入多个sheet"></a>同时写入多个sheet</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_excel_pd</span>(<span class="params">file, sheet, data</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    excel title: name /  age</span></span><br><span class="line"><span class="string">        df1 = &#123;</span></span><br><span class="line"><span class="string">        &#x27;name&#x27;: [1, 2, 3],</span></span><br><span class="line"><span class="string">        &#x27;age&#x27;: [1, 2, 3]</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    pandas DataFrame  write to excel</span></span><br><span class="line"><span class="string">    :param file:  file_path + file_name</span></span><br><span class="line"><span class="string">    :param sheet: type：list</span></span><br><span class="line"><span class="string">    :param data: type: list  DataFrame</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    writer = pd.ExcelWriter(file)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(sheet)):</span><br><span class="line">        df = pd.DataFrame(data[i])</span><br><span class="line">        df.to_excel(excel_writer=writer, sheet_name=sheet[i])</span><br><span class="line">    writer.save()</span><br><span class="line">    writer.close()</span><br><span class="line">    log.info(<span class="string">&#x27;写入数据完成！&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="按条件过滤行"><a href="#按条件过滤行" class="headerlink" title="按条件过滤行"></a>按条件过滤行</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[df[A] &gt; <span class="number">0</span>] <span class="comment">#选出A列&gt;0的行</span></span><br><span class="line">df[df[A]。isin([<span class="number">0</span>,<span class="number">1</span>])] <span class="comment">#选出A列中是0或1的行</span></span><br></pre></td></tr></table></figure>
<h1 id="读入"><a href="#读入" class="headerlink" title="读入"></a>读入</h1><p>import pandas as pd<br>df=pd.read_table(‘dddd.txt’,header=0,index_col=0,error_bad_lines=False,delimiter=’\t’)</p>
<h1 id="列名"><a href="#列名" class="headerlink" title="列名"></a>列名</h1><p>df.columns</p>
<h1 id="删除列"><a href="#删除列" class="headerlink" title="删除列"></a>删除列</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.drop([<span class="string">&#x27;k&#x27;</span>], axis=<span class="number">1</span>, inplace=<span class="literal">True</span>) <span class="comment">#删除k列</span></span><br></pre></td></tr></table></figure>
<h1 id="缺失值处理"><a href="#缺失值处理" class="headerlink" title="缺失值处理"></a>缺失值处理</h1><p>values={}<br>with open(‘fill_na.txt’) as f:<br>    for line in f:<br>        line = line.strip().split(‘:’)<br>        values[line[0]] = int(line[1])<br>df = df.fillna(value=values)<br>df = df.dropna(axis=0,how=’any’) #删除含有NULL的行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除指定列有空值的行</span></span><br><span class="line">df_ios_tmp=df_ios.dropna(subset=[列名],how=<span class="string">&#x27;all&#x27;</span>,inplace=<span class="literal">False</span>) <span class="comment">#how=all 或者 any</span></span><br></pre></td></tr></table></figure>
<h1 id="shuffle"><a href="#shuffle" class="headerlink" title="shuffle"></a>shuffle</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.sample(frac=<span class="number">1</span>).reset_index(drop=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1 id="数据检查"><a href="#数据检查" class="headerlink" title="数据检查"></a>数据检查</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#datafram 每一列值unique数</span></span><br><span class="line">data_idfa.info(verbose=<span class="literal">True</span>, null_counts=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#每一列均值 方差等</span></span><br><span class="line">data_idfa.describe()</span><br></pre></td></tr></table></figure>

<h1 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_ios.groupby([<span class="string">&#x27;y_flag&#x27;</span>], as_index=<span class="literal">False</span>)[<span class="string">&#x27;dt&#x27;</span>].count() <span class="comment">#聚合函数除了count还有sum,min,max等</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_ios.groupby([<span class="string">&#x27;dt_m&#x27;</span>,<span class="string">&#x27;y_flag&#x27;</span>], as_index=<span class="literal">False</span>)[<span class="string">&#x27;pin&#x27;</span>].count()</span><br></pre></td></tr></table></figure>

<h1 id="截取时间前几位"><a href="#截取时间前几位" class="headerlink" title="截取时间前几位"></a>截取时间前几位</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_ios[<span class="string">&#x27;dt_m&#x27;</span>]=df_ios[<span class="string">&#x27;dt&#x27;</span>].<span class="built_in">str</span>[<span class="number">0</span>:<span class="number">7</span>]</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2020/04/14/3_%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E4%B9%98%E5%AD%90%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/14/3_%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E4%B9%98%E5%AD%90%E6%B3%95/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-14 16:30:10" itemprop="dateCreated datePublished" datetime="2020-04-14T16:30:10+08:00">2020-04-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="原始问题"><a href="#原始问题" class="headerlink" title="原始问题"></a>原始问题</h1><p>$f(x),c_i(x),h_i(x)$是在$R^n$上的<code>连续可微</code>函数，考虑约束最优化问题：</p>
<script type="math/tex; mode=display">
\begin{align}
min \quad f(x) \quad st \quad c_i(x)<0,i &=1,2...k  \\, 
h_j(x)=0,j &=1,2...l
\end{align}</script><p>此问题我们成为原始问题。</p>
<p>为了方便解决此问题，我们引入<strong><code>广义拉格朗日函数</code></strong>L，可证明原始问题等价于拉格朗日函数的极小极大值问题。拉格朗日函数构造如下：</p>
<script type="math/tex; mode=display">
L(x,\alpha_i,\beta_j)=f(x)+\sum_{i=1}^k\alpha_ic_i(x)+\sum_{j=1}^l\beta_jh_j(x)，其中 x\in R^n,\alpha_i>0,\beta_j>0</script><p>我们考虑x的函数：</p>
<script type="math/tex; mode=display">
\theta_p(x)=max \quad L(x,\alpha_i,\beta_j),其中 x\in R^n,\alpha_i>0,\beta_j>0</script><p>可以证明  $min(\theta_p(x)) $等价于原始问题,即约束下的优化问题转化为了广义拉格朗日的极小极大值问题。</p>
<p>【证明】约束下的优化问题转化为了广义拉格朗日的极小极大值问题</p>
<p>满足$c_i(x)&lt;0,i =1,2…k ,h_j(x)=0,j =1,2…l$时， $max(L(x,\alpha_i,\beta_j)) = f(x)$,即$\theta_p(x)=f(x)$。</p>
<p>不满足$c_i(x)&lt;0,i =1,2…k ,h_j(x)=0,j =1,2…l$时，可通过设置$\alpha_i 和\beta_j$ 使得$\theta_p(x)=+\infin $</p>
<p>所以</p>
<script type="math/tex; mode=display">
\theta_p=\begin{cases}f(x),x满足原始问题条件 \\ 
+\infin , x不满足原始问题条件
\end{cases}</script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2020/04/14/2_%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%E5%AD%A6%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/14/2_%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%E5%AD%A6%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-14 15:04:50" itemprop="dateCreated datePublished" datetime="2020-04-14T15:04:50+08:00">2020-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-02-28 12:25:04" itemprop="dateModified" datetime="2022-02-28T12:25:04+08:00">2022-02-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h1 id="业务知识"><a href="#业务知识" class="headerlink" title="业务知识"></a>业务知识</h1><h2 id="广告分类"><a href="#广告分类" class="headerlink" title="广告分类"></a>广告分类</h2><p>广告的根本目的，是广告主通过媒体达到低成本的用户接触。</p>
<p>也就是说，按某种市场意图接触相应的人群，进而影响其中的潜在用户，使他们选择广告主产品的机率增加，或者对产品性价比的苛求程度降低，才是广告的根本目的。至于短期内的转化效果，由于市场意图或媒体性质的不同，并不是直接可比。因此ROI中的产出是很难计算的</p>
<h2 id="广告发展史"><a href="#广告发展史" class="headerlink" title="广告发展史"></a>广告发展史</h2><ul>
<li><p>售卖模式1：合约式广告(Agreement-based Advertising)</p>
</li>
<li><p>广告投放方式：定向广告（Target Ad），是为了<code>拆分流量以获得更高的营收</code>，具体来说：媒体向广告主保证某个投放量，并在此基础上确定合同的总金额以及量未完成情况下的赔偿方案；<strong><code>只卖好苹果</code></strong></p>
<blockquote>
<p><code>博弈</code>：定向太准了可能导致尾部流量卖不出去，对媒体不利，但广告主效果好的话整个广告市场规模就会变大，对媒体有利。</p>
</blockquote>
</li>
<li><p>交易方式：<code>担保式投送(Guaranteed Delivery)</code>：媒体向广告主保证某个投放量，并在此基础上确定合同的总金额以及量未完成情况下的赔偿方案<strong><code>保证交易苹果的量</code></strong></p>
</li>
<li><p>计费方式：按千次展示付费(Cost Per Mille, CPM)的计费方式</p>
</li>
</ul>
<blockquote>
<p>难点：一是如何有效地将流量分配到各个合约互相交叉的人群覆盖上；二是要在在线的环境下实时且经济地完成每一次展示决策。</p>
</blockquote>
<ul>
<li>在线分配(Online Allocation):将各<code>合约的量</code>看做约束条件，将某种意义下的质看做目标函数，我们可以利用带约束优化(Constrained Optimization)的数学框架来探索这一问题；搜索排序以优化相关性为目的，在线分配  是以<code>优化投入产出比</code>为目标。</li>
<li>售卖模式2：<code>竞价广告(Auction-based Advertising)</code>，抛弃量的保证，而采用最唯利是图的策略来进行广告决策，具体来说就是：供给方只向广告主保证质即单位流量的成本，但不再以合约的方式给出量的保证，换言之，对每一次展示，都基本按照收益最高的原则来决策。<strong><code>线下对每批苹果进行出价</code></strong> </li>
</ul>
<blockquote>
<p>由于只能在广告网络定义好的定向标签组合上预先指定出价，而不能控制每一次展示的出价，因此，市场看起来象一个黑盒子，需求方只能靠选择合适的标签组合，以及阶段性调整出价来间接控制效果。</p>
<p>随着人群定向越来越精准，广告主数量越来越多，一方面担保是投送难以对流量做精确的分配来保证各广告主的投放量，另一方面当同一流量满足多个合约要求时，仅仅考虑量的约束会导致本来可以卖得更高的流量的浪费。</p>
</blockquote>
<ul>
<li>售卖模式3：实时竞价（real time bidding）。竞价广告是在媒体平台上用媒体已有的标签进行人群定向，并对定向人群进行出价。实时竞价是实时判断单个流量是不是自己的定向人群，并进行出价，可以实现更精准的人群定向</li>
</ul>
<blockquote>
<p>所谓实时竞价，就是把拍卖的过程由广告主预先出价，变成每次展示时实时出价。只要把广告展示的上下文页面url，以及访客的cookie等信息传给需求方，它就有充分的信息来完成定制化的人群选择和出价。</p>
</blockquote>
<ul>
<li>需求方平台(Demand Side Platform, DSP) ：通过实时竞价的方式，按照定制化的人群标签购买广告，这样与广告交易平台接口的产品叫做DSP。DSP可以方便的设置对于每个流量的定向于出价，并把结果返回媒体的平台，<code>DSP需要尽可能准确地估计每一次展示带来的期望价值。</code></li>
</ul>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>首先是<code>合约阶段</code>，广告主通过代理公司(Agency)从媒体方采买广告，而媒体方的Ad Server则负责完成和优化各个广告主的合约；</p>
<p>然后，市场进化出了<code>竞价售卖方式</code>，从而在靠近供给方产生了广告网络(Ad Network)这样的产品形态，而需求方的代理公司为了适应这一市场变化，孵化除了对应的广告采买平台(Media Buying Platform)；</p>
<p>最后，当市场产生了<code>实时竞价方式交易</code>时，供给方进化出了广告交易平台(Ad Exchange)，而需求方则需要用需求方平台(DSP)与其对接来出价和投送广告。</p>
<h1 id="计算广告基础"><a href="#计算广告基础" class="headerlink" title="计算广告基础"></a>计算广告基础</h1><p>广告平台优化目标： $ 对1…T次广告选择a_{i…T} \quad s.t. \quad max \sum_i^T r(a_i,u_i,c_i)/\sum_i^Tp_i $</p>
<p>表达式中的a,u,c三个变量，分别代表广告、用户与上下文，即广告活动的三个参与主体。<em>i</em>代表从第1次到第<em>T</em>次之间的某一次广告展示。我们优化的目标，就是在这<em>T</em>次展示上的总产出(<em>r</em>)与总投入(<em>p</em>)的比，即ROI。</p>
<p>$eCPM(a,u,c)=r(a,u,c) =点击率<em>点击价值= ctr(a,u,c)</em>v(a,u)$</p>
<h2 id="广告系统构架图"><a href="#广告系统构架图" class="headerlink" title="广告系统构架图"></a>广告系统构架图</h2><ol>
<li>广告投放机（Ad Server）：调用哥哥模块返回前端结果</li>
<li>广告检索：实时接受投放信息，搜索广告备选集</li>
<li>广告排序，包括Click modeling和Ad ranking。关键技术是1.离线分布式计算平台上的海量数据支持的点击率预测模型的训练；2.线上高效查询用户特征并进行实时计算。在ctr的基础上简历点击价值估计模型，通常是简单的规则</li>
<li>数据高速公路（Data highway）：将在线数据准实时的传输到离线分部式平台和流计算平台，供后续数据处理和建模</li>
<li>用户日志生成：收集各渠道日志，整理成kv形式进行存储</li>
<li>商业智能（Business Inteligence）：看板等对外交流平台</li>
<li>行为定向：产生结构化标签库</li>
<li>上下文定向：页面抓取给上下文打标签，与行为定向一起产生定向效果</li>
<li>定制化用户：接收广告主定向需求（比如推包）</li>
<li>在线行为反馈：利用日志或买点进行准实时任务，如实时反馈点击，用户行为标签等。在利用日志完成这些逻辑之前，必须要进行的步骤是反作弊(Anti-spam)与计价(Billing)。<code>在很多情形下，把系统信息反馈调整做得更快，比把模型预测做得更准确效果更加显著</code></li>
<li>广告管理系统：只有这部分是面向用户的。通过广告管理系统定制和调整广告投放，并且与数据仓库交互</li>
<li>实时竞价接口：对接DSP（竞价平台）的接口。对于媒体即平台的case，不需要</li>
</ol>
<p><img src="/Users/hetianqi/Documents/charging/notes_of_the_world/计算广告学笔记.assets/image-20200414143343558.png" alt="image-20200414143343558"></p>
<h1 id="准备知识"><a href="#准备知识" class="headerlink" title="准备知识"></a>准备知识</h1><h2 id="带约束优化方法和拉格朗日乘子法"><a href="#带约束优化方法和拉格朗日乘子法" class="headerlink" title="带约束优化方法和拉格朗日乘子法"></a>带约束优化方法和拉格朗日乘子法</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2020/04/02/2_%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/Uplift%20Modeling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/02/2_%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/Uplift%20Modeling/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-02 12:29:26" itemprop="dateCreated datePublished" datetime="2020-04-02T12:29:26+08:00">2020-04-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Uplift Modeling</p>
<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>增量模型，用于预估某种干预对结果的因果关系（ITE，Individual Treatment Effect），即预测：</p>
<h1 id="基本假设"><a href="#基本假设" class="headerlink" title="基本假设"></a>基本假设</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2020/03/02/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/01_%E6%97%A5%E6%9C%9F%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/02/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/01_%E6%97%A5%E6%9C%9F%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-02 16:39:54" itemprop="dateCreated datePublished" datetime="2020-03-02T16:39:54+08:00">2020-03-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、日期运算"><a href="#一、日期运算" class="headerlink" title="一、日期运算"></a>一、日期运算</h2><h3 id="1-date-add"><a href="#1-date-add" class="headerlink" title="1. date_add"></a>1. date_add</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> date_add(<span class="string">&#x27;2017-09-15&#x27;</span>,<span class="number">1</span>) ;</span><br></pre></td></tr></table></figure>
<h3 id="2-date-sub"><a href="#2-date-sub" class="headerlink" title="2. date_sub"></a>2. date_sub</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> date_sub(<span class="string">&#x27;2017-09-15&#x27;</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<h3 id="3-datediff"><a href="#3-datediff" class="headerlink" title="3. datediff"></a>3. datediff</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> datediff(<span class="string">&#x27;2017-09-15&#x27;</span>,<span class="string">&#x27;2017-09-01&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="4-add-months"><a href="#4-add-months" class="headerlink" title="4. add_months"></a>4. add_months</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> add_months(<span class="string">&#x27;2017-02-27&#x27;</span>,<span class="number">-1</span>);</span><br><span class="line"><span class="comment">-- 2017-01-27</span></span><br><span class="line"><span class="keyword">select</span> add_months(<span class="string">&#x27;2017-02-01&#x27;</span>,<span class="number">-1</span>);</span><br><span class="line"><span class="comment">-- 2017-01-01</span></span><br><span class="line"><span class="keyword">select</span> add_months(<span class="string">&#x27;2017-02-28&#x27;</span>,<span class="number">-1</span>);</span><br><span class="line"><span class="comment">-- 2017-01-31</span></span><br></pre></td></tr></table></figure>
<h3 id="5-last-day"><a href="#5-last-day" class="headerlink" title="5. last_day"></a>5. last_day</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select last_day(&#x27;2018-09-22&#x27;);</span><br></pre></td></tr></table></figure>
<h3 id="6-months-between"><a href="#6-months-between" class="headerlink" title="6. months_between"></a>6. months_between</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> months_between(<span class="string">&#x27;2018-09-22&#x27;</span>,<span class="string">&#x27;2018-08-02&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="二、日期转换"><a href="#二、日期转换" class="headerlink" title="二、日期转换"></a>二、日期转换</h2><h3 id="1-to-date"><a href="#1-to-date" class="headerlink" title="1. to_date"></a>1. to_date</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> to_date(<span class="string">&#x27;2017-09-15 11:12:00&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="2-from-unixtime"><a href="#2-from-unixtime" class="headerlink" title="2. from_unixtime"></a>2. from_unixtime</h3><p>时间戳转日期</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--时间戳转日期</span></span><br><span class="line"><span class="keyword">select</span> from_unixtime(<span class="number">1505456567</span>); </span><br><span class="line"><span class="keyword">select</span> from_unixtime(<span class="number">1505456567</span>,<span class="string">&#x27;yyyyMMdd&#x27;</span>); </span><br><span class="line"><span class="keyword">select</span> from_unixtime(<span class="number">1505456567</span>,<span class="string">&#x27;yyyy-MM-dd HH:mm:ss&#x27;</span>); </span><br><span class="line"><span class="keyword">select</span> from_unixtime(unix_timestamp(),<span class="string">&#x27;yyyy-MM-dd HH:mm:ss&#x27;</span>); <span class="comment">--获取系统当前时间</span></span><br></pre></td></tr></table></figure>
<p>方法1: from_unixtime+ unix_timestamp<br>—20171205转成2017-12-05<br>select from_unixtime(unix_timestamp(‘20171205’,’yyyymmdd’),’yyyy-mm-dd’) from dual;</p>
<p>—2017-12-05转成20171205<br>select from_unixtime(unix_timestamp(‘2017-12-05’,’yyyy-mm-dd’),’yyyymmdd’) from dual;</p>
<p>方法2: substr + concat<br>—20171205转成2017-12-05<br>select concat(substr(‘20171205’,1,4),’-‘,substr(‘20171205’,5,2),’-‘,substr(‘20171205’,7,2)) from dual;</p>
<p>—2017-12-05转成20171205<br>select concat(substr(‘2017-12-05’,1,4),substr(‘2017-12-05’,6,2),substr(‘2017-12-05’,9,2)) from dual;</p>
<p>————————————————<br>版权声明：本文为CSDN博主「开心果汁」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/u013421629/article/details/80068090">https://blog.csdn.net/u013421629/article/details/80068090</a></p>
<h2 id="三、自动获取日期"><a href="#三、自动获取日期" class="headerlink" title="三、自动获取日期"></a>三、自动获取日期</h2><h3 id="1-current-date"><a href="#1-current-date" class="headerlink" title="1. current_date"></a>1. current_date</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--其他日期函数</span></span><br><span class="line"><span class="comment">--查询当前系统时间(包括毫秒数): </span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">current_timestamp</span>;  </span><br><span class="line"><span class="comment">-- 查询当月第几天: </span></span><br><span class="line"><span class="keyword">select</span> dayofmonth(<span class="built_in">current_date</span>);</span><br><span class="line"><span class="comment">-- 月末</span></span><br><span class="line"><span class="keyword">select</span> last_day(<span class="built_in">current_date</span>);</span><br><span class="line"><span class="comment">-- 当月第1天</span></span><br><span class="line"><span class="keyword">select</span> date_sub(<span class="built_in">current_date</span>,dayofmonth(<span class="built_in">current_date</span>)<span class="number">-1</span>);</span><br><span class="line"><span class="comment">-- 下个月第1天</span></span><br><span class="line"><span class="keyword">select</span> add_months(date_sub(<span class="built_in">current_date</span>,dayofmonth(<span class="built_in">current_date</span>)<span class="number">-1</span>),<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<h3 id="2-sysdate"><a href="#2-sysdate" class="headerlink" title="2. sysdate"></a>2. sysdate</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sysdate(<span class="number">-2</span>) ;</span><br></pre></td></tr></table></figure>
<h3 id="3-unix-timestamp"><a href="#3-unix-timestamp" class="headerlink" title="3. unix_timestamp"></a>3. unix_timestamp</h3><p>时间戳函数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--日期转时间戳：从1970-01-01 00:00:00 UTC到指定时间的秒数</span></span><br><span class="line"><span class="keyword">select</span> unix_timestamp(); <span class="comment">--获得当前时区的UNIX时间戳</span></span><br><span class="line"><span class="keyword">select</span> unix_timestamp(<span class="string">&#x27;2017-09-15 14:23:00&#x27;</span>); </span><br><span class="line"><span class="keyword">select</span> unix_timestamp(<span class="string">&#x27;2017-09-15 14:23:00&#x27;</span>,<span class="string">&#x27;yyyy-MM-dd HH:mm:ss&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> unix_timestamp(<span class="string">&#x27;20170915 14:23:00&#x27;</span>,<span class="string">&#x27;yyyyMMdd HH:mm:ss&#x27;</span>); </span><br></pre></td></tr></table></figure>
<h3 id="4-年月日"><a href="#4-年月日" class="headerlink" title="4. 年月日"></a>4. 年月日</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select year(dt),month(dt),day(dt),hour(dt),minute(dt),second(dt),weekofyear(dt);</span><br></pre></td></tr></table></figure>
<h3 id="5-trunc"><a href="#5-trunc" class="headerlink" title="5. trunc"></a>5. trunc</h3><p>获取月初、年初</p>
<p>&gt;</p>
<blockquote>
<p>trunc(date,format)  format:MONTH/MON/MM, YEAR/YYYY/YY</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> trunc(<span class="string">&#x27;2018-09-27&#x27;</span>,<span class="string">&#x27;YY&#x27;</span>) <span class="keyword">as</span> date_time,trunc(<span class="string">&#x27;2018-09-27 21:16:13&#x27;</span>,<span class="string">&#x27;MM&#x27;</span>) <span class="keyword">as</span> date_time1;</span><br><span class="line"></span><br><span class="line"><span class="comment">--date_time       date_time1</span></span><br><span class="line"><span class="comment">--2018-01-01      2018-09-01</span></span><br></pre></td></tr></table></figure>
<h3 id="6-next-day"><a href="#6-next-day" class="headerlink" title="6. next_day"></a>6. next_day</h3><p>当前日期下个星期X的日期</p>
<p>&gt;</p>
<blockquote>
<p>next_day(date,formate) format:英文星期几的缩写或者全拼</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> next_day(<span class="string">&#x27;2018-09-27&#x27;</span>,<span class="string">&#x27;TH&#x27;</span>) <span class="keyword">as</span> date_time,next_day(<span class="string">&#x27;2018-09-27 21:16:13&#x27;</span>,<span class="string">&#x27;TU&#x27;</span>) <span class="keyword">as</span> date_time1;</span><br><span class="line"><span class="comment">-- date_time       date_time1</span></span><br><span class="line"><span class="comment">-- 2018-10-04      2018-10-02</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2020/03/02/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/shell%E6%97%A5%E6%9C%9F%E8%BF%90%E7%AE%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/02/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/shell%E6%97%A5%E6%9C%9F%E8%BF%90%E7%AE%97/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-02 11:02:08" itemprop="dateCreated datePublished" datetime="2020-03-02T11:02:08+08:00">2020-03-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、date"><a href="#一、date" class="headerlink" title="一、date"></a>一、<a target="_blank" rel="noopener" href="http://man7.org/linux/man-pages/man1/date.1.html">date</a></h2><h3 id="1-查看文档"><a href="#1-查看文档" class="headerlink" title="1. 查看文档"></a>1. 查看文档</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man date</span><br></pre></td></tr></table></figure>
<h3 id="2-常用用法"><a href="#2-常用用法" class="headerlink" title="2. 常用用法"></a>2. 常用用法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setdt=$(date +%Y-%m-01) $=$(date -d <span class="string">&quot;now&quot;</span> +%Y-%m-01)</span><br><span class="line">setdt=<span class="string">&quot;&#x27;`date -d &quot;</span>-1 day <span class="variable">$&#123;setdt&#125;</span><span class="string">&quot; +%Y-%m-%d`&#x27;&quot;</span></span><br><span class="line">today=$(date +%Y-%m-%d)</span><br><span class="line">yesterday=<span class="string">&quot;&#x27;<span class="subst">$(date -d <span class="string">&quot;-1 day <span class="variable">$&#123;today&#125;</span>&quot;</span> +%Y-%m-%d)</span>&#x27;&quot;</span>  <span class="comment">#输出： &#x27;2019-01-01&#x27; </span></span><br><span class="line">yesterday=$(date -d <span class="string">&quot;yesterday&quot;</span> +%Y-%m-%d)</span><br><span class="line">last_week=<span class="string">&quot;&#x27;<span class="subst">$(date -d <span class="string">&quot;-7 day <span class="variable">$&#123;today&#125;</span>&quot;</span> +%Y-%m-%d)</span>&#x27;&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-案例"><a href="#3-案例" class="headerlink" title="3. 案例"></a>3. 案例</h3><p>案例：计算生日还有多少天</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -p<span class="string">&quot;Input your birthday(YYYYmmdd):&quot;</span> date1</span><br><span class="line">m=`date --date=<span class="string">&quot;<span class="variable">$date1</span>&quot;</span> +%m` <span class="comment">#得到生日的月</span></span><br><span class="line">d=`date --date=<span class="string">&quot;<span class="variable">$date1</span>&quot;</span> +%d` <span class="comment">#得到生日的日</span></span><br><span class="line">date_now=`date +%s` <span class="comment">#得到当前时间的秒值</span></span><br><span class="line">y=`date +%Y` <span class="comment">#得到当前时间的年</span></span><br><span class="line">birth=`date --date=<span class="string">&quot;$y$m<span class="variable">$d</span>&quot;</span> +%s` <span class="comment">#得到今年的生日日期的秒值</span></span><br><span class="line">internal=$((<span class="variable">$birth</span>-<span class="variable">$date_now</span>)) <span class="comment">#计算今日到生日日期的间隔时间</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$internal</span>&quot;</span> -lt <span class="string">&quot;0&quot;</span> ]; <span class="keyword">then</span> <span class="comment">#判断今天的生日是否已过</span></span><br><span class="line">birth=`date --date=<span class="string">&quot;<span class="subst">$(($y+1)</span>)$m<span class="variable">$d</span>&quot;</span> +%s` <span class="comment">#得到明天的生日日期秒值</span></span><br><span class="line">internal=$((<span class="variable">$birth</span>-<span class="variable">$date_now</span>))<span class="comment">#计算今天到下一个生日的间隔时间</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Thereis :<span class="subst">$(($internal/60/60/24)</span>) days.&quot;</span> <span class="comment">#输出结果，秒换算为天</span></span><br></pre></td></tr></table></figure>
<p>案例2：循环日期计算</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">set_date=<span class="string">&quot;2017-12-01&quot;</span></span><br><span class="line">last_date=<span class="string">&quot;2017-11-30&quot;</span></span><br><span class="line"><span class="keyword">for</span>((i=0;i&lt;=15;i++));</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">  start_date=`date -d <span class="string">&quot;+<span class="variable">$i</span> month <span class="variable">$&#123;set_date&#125;</span>&quot;</span> +%Y-%m-%d`</span><br><span class="line">  input_date=`date -d <span class="string">&quot;-1 day <span class="variable">$&#123;start_date&#125;</span>&quot;</span> +%Y-%m-%d`</span><br><span class="line">  date_str=`date -d <span class="string">&quot;<span class="variable">$&#123;input_date&#125;</span>&quot;</span> +%Y%m%d`</span><br><span class="line">  sed -i <span class="string">&quot;s/<span class="variable">$&#123;last_date&#125;</span>/<span class="variable">$&#123;input_date&#125;</span>/g&quot;</span> _config.sh </span><br><span class="line"></span><br><span class="line">  last_date=<span class="variable">$input_date</span></span><br><span class="line"></span><br><span class="line">  sh train_pinlist.sh</span><br><span class="line">  sh get_features.sh</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>案例3：循环日期计算</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">START_DATE=<span class="string">&#x27;2018-10-12&#x27;</span></span><br><span class="line">END_DATE=<span class="string">&#x27;2018-12-11&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> [ <span class="string">&quot;<span class="variable">$START_DATE</span>&quot;</span> != <span class="string">&quot;<span class="variable">$END_DATE</span>&quot;</span> ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;****** the date is <span class="variable">$START_DATE</span> !!! ******&quot;</span></span><br><span class="line">    hive -S --hiveconf dt=<span class="variable">$START_DATE</span>  -f  a01_extract_feat_jt_transaction.sql</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;****** <span class="variable">$START_DATE</span> finished !!!!&quot;</span></span><br><span class="line">    NEXT_DATE=`date -d <span class="string">&quot;1 day <span class="variable">$&#123;START_DATE&#125;</span>&quot;</span> +%Y-%m-%d`</span><br><span class="line">    START_DATE=<span class="variable">$NEXT_DATE</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h2 id="二、日期函数"><a href="#二、日期函数" class="headerlink" title="二、日期函数"></a>二、日期函数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#1:判断是否闰年check_leap() #</span><br><span class="line">#2:获取月份最大日期get_mon_days() #</span><br><span class="line">#3:检查日期格式check_date() #</span><br><span class="line">#4:返回昨天日期get_before_date() #</span><br><span class="line">#5:返回明天日期get_next_date() #</span><br><span class="line">#6:返回当月月末日期YYYYMMDD get_cur_date()</span><br><span class="line">#7:返回当月月份YYYYMM get_cur_month()</span><br><span class="line">#8:返回上月月末日期YYYYMMDD get_last_date()</span><br><span class="line">#9:返回上月月份YYYYMM get_last_month()</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2020/01/17/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/C%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/17/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/C%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-17 16:12:26" itemprop="dateCreated datePublished" datetime="2020-01-17T16:12:26+08:00">2020-01-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h1 id="环境与入门"><a href="#环境与入门" class="headerlink" title="环境与入门"></a>环境与入门</h1><h2 id="实例代码"><a href="#实例代码" class="headerlink" title="实例代码"></a>实例代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">/* 我的第一个 C 程序 */</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;Hello, World! \n&quot;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>程序的第一行 <em>#include <stdio.h></em> 是<strong>预处理器指令</strong>，告诉 C 编译器在实际编译之前要包含 stdio.h 文件。</li>
<li>下一行 <em>int main()</em> 是主函数，程序从这里开始执行。</li>
<li>下一行 /<em>…</em>/ 将会被编译器忽略，这里放置程序的注释内容。它们被称为程序的注释。</li>
<li>下一行 <em>printf(…)</em> 是 C 中另一个可用的函数，会在屏幕上显示消息 “Hello, World!”。</li>
<li>下一行 <strong>return 0;</strong> 终止 main() 函数，并返回值 0。</li>
</ol>
<h2 id="编译-amp-执行C程序"><a href="#编译-amp-执行C程序" class="headerlink" title="编译&amp;执行C程序"></a>编译&amp;执行C程序</h2><ol>
<li>开一个文本编辑器，添加上述代码。</li>
<li>保存文件为 <em>hello.c</em>。</li>
<li>打开命令提示符，进入到保存文件所在的目录。</li>
<li>键入 <em>gcc hello.c</em>，输入回车，编译代码。</li>
<li>如果代码中没有错误，命令提示符会跳到下一行，并生成 <em>a.out</em> 可执行文件。</li>
<li>现在，键入 <em>a.out</em> 来执行程序。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc hello.c</span><br><span class="line">./a.out</span><br></pre></td></tr></table></figure>
<p>如果是多个 c 代码的源码文件，编译方法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gcc test1.c test2.c -o main.out</span><br><span class="line">$ ./main.out</span><br></pre></td></tr></table></figure>
<p>test1.c 与 test2.c 是两个源代码文件</p>
<h1 id="C语言基本语法"><a href="#C语言基本语法" class="headerlink" title="C语言基本语法"></a>C语言基本语法</h1><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单行注释</span></span><br><span class="line"><span class="comment">/* 单行注释 */</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> 多行注释</span></span><br><span class="line"><span class="comment"> 多行注释</span></span><br><span class="line"><span class="comment"> 多行注释</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>必须以分号结尾</p>
<h2 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;打印整数 ： %d \n&quot;</span>,<span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">格式字符</th>
<th style="text-align:left">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">d</td>
<td style="text-align:left">以十进制形式输出带符号整数(正数不输出符号)</td>
</tr>
<tr>
<td style="text-align:left">o</td>
<td style="text-align:left">以八进制形式输出无符号整数(不输出前缀0)</td>
</tr>
<tr>
<td style="text-align:left">x,X</td>
<td style="text-align:left">以十六进制形式输出无符号整数(不输出前缀Ox)</td>
</tr>
<tr>
<td style="text-align:left">u</td>
<td style="text-align:left">以十进制形式输出无符号整数</td>
</tr>
<tr>
<td style="text-align:left">f</td>
<td style="text-align:left">以小数形式输出单、双精度实数</td>
</tr>
<tr>
<td style="text-align:left">e,E</td>
<td style="text-align:left">以指数形式输出单、双精度实数</td>
</tr>
<tr>
<td style="text-align:left">g,G</td>
<td style="text-align:left">以%f或%e中较短的输出宽度输出单、双精度实数</td>
</tr>
<tr>
<td style="text-align:left">c</td>
<td style="text-align:left">输出单个字符</td>
</tr>
<tr>
<td style="text-align:left">s</td>
<td style="text-align:left">输出字符串</td>
</tr>
<tr>
<td style="text-align:left">p</td>
<td style="text-align:left">输出指针地址</td>
</tr>
<tr>
<td style="text-align:left">lu</td>
<td style="text-align:left">32位无符号整数</td>
</tr>
<tr>
<td style="text-align:left">llu</td>
<td style="text-align:left">64位无符号整数</td>
</tr>
</tbody>
</table>
</div>
<h2 id="C数据类型"><a href="#C数据类型" class="headerlink" title="C数据类型"></a>C数据类型</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">序号</th>
<th style="text-align:left">类型与描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left"><strong>基本类型：</strong> 它们是算术类型，包括两种类型：整数类型和浮点类型。</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left"><strong>枚举类型：</strong> 它们也是算术类型，被用来定义在程序中只能赋予其一定的离散整数值的变量。</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left"><strong>void 类型：</strong> 类型说明符 <em>void</em> 表明没有可用的值。</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left"><strong>派生类型：</strong> 它们包括：指针类型、数组类型、结构类型、共用体类型和函数类型。</td>
</tr>
</tbody>
</table>
</div>
<p>一个bite占8bit</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">类型</th>
<th style="text-align:left">存储大小</th>
<th style="text-align:left">值范围</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">char</td>
<td style="text-align:left">1 字节</td>
<td style="text-align:left">-128 到 127 或 0 到 255</td>
</tr>
<tr>
<td style="text-align:left">int</td>
<td style="text-align:left">2 或 4 字节</td>
<td style="text-align:left">-32,768 到 32,767 或 -2,147,483,648 到 2,147,483,647</td>
</tr>
<tr>
<td style="text-align:left">short</td>
<td style="text-align:left">2 字节</td>
<td style="text-align:left">-32,768 到 32,767</td>
</tr>
<tr>
<td style="text-align:left">long</td>
<td style="text-align:left">4 字节</td>
<td style="text-align:left">-2,147,483,648 到 2,147,483,647</td>
</tr>
<tr>
<td style="text-align:left">float</td>
<td style="text-align:left">4 字节</td>
<td style="text-align:left">1.2E-38 到 3.4E+38</td>
</tr>
<tr>
<td style="text-align:left">double</td>
<td style="text-align:left">8 字节</td>
<td style="text-align:left">2.3E-308 到 1.7E+308</td>
</tr>
<tr>
<td style="text-align:left">long double</td>
<td style="text-align:left">16 字节</td>
<td style="text-align:left">3.4E-4932 到 1.1E+4932</td>
</tr>
</tbody>
</table>
</div>
<h2 id="变量的定义"><a href="#变量的定义" class="headerlink" title="变量的定义"></a>变量的定义</h2><p>变量只不过是程序可操作性的存储区的名称，每个变量有特定的类型，类型决定了变量存储的大小和布局</p>
<p>变量定义就是告诉编译器在何处创建变量的存储，以及如何创建变量的存储。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i,j,k;</span><br></pre></td></tr></table></figure>
<h2 id="变量的声明"><a href="#变量的声明" class="headerlink" title="变量的声明"></a>变量的声明</h2><p>变量声明向编译器保证变量以指定的类型和名称存在，这样编译器在不需要知道变量完整细节的情况下也能继续进一步的编译。变量声明只在编译时有它的意义，在程序连接时编译器需要实际的变量声明。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> i; <span class="comment">//声明，不是定义</span></span><br><span class="line"><span class="keyword">int</span> i; <span class="comment">//声明，也是定义</span></span><br></pre></td></tr></table></figure>
<p>变量的声明有两种情况：</p>
<ul>
<li><p>1、一种是需要建立存储空间的。例如：int a 在声明的时候就已经建立了存储空间。</p>
</li>
<li><p>2、另一种是不需要建立存储空间的，通过使用extern关键字声明变量名而不定义它。 例如：extern int a 其中变量 a 可以在别的文件中定义的。</p>
<p>除非有extern关键字，否则都是变量的定义。</p>
</li>
</ul>
<blockquote>
<p>如果需要在一个源文件中引用另外一个源文件中定义的变量，我们只需在引用的文件中将变量加上 extern 关键字的声明即可。</p>
</blockquote>
<ul>
<li><p>C 中有两种类型的表达式：</p>
<ol>
<li><strong>左值（lvalue）：</strong>指向内存位置的表达式被称为左值（lvalue）表达式。左值可以出现在赋值号的左边或右边。</li>
<li><strong>右值（rvalue）：</strong>术语右值（rvalue）指的是存储在内存中某些地址的数值。右值是不能对其进行赋值的表达式，也就是说，右值可以出现在赋值号的右边，但不能出现在赋值号的左边。</li>
</ol>
<p>变量是左值，因此可以出现在赋值号的左边。数值型的字面值是右值，因此不能被赋值，不能出现在赋值号的左边。  </p>
</li>
</ul>
<h2 id="整数常量"><a href="#整数常量" class="headerlink" title="整数常量"></a>整数常量</h2><p>整数常量可以是十进制、八进制或十六进制的常量。前缀指定基数：0x 或 0X 表示十六进制，0 表示八进制，不带前缀则默认表示十进制。</p>
<p>整数常量也可以带一个后缀，后缀是 U 和 L 的组合，U 表示无符号整数（unsigned），L 表示长整数（long）。后缀可以是大写，也可以是小写，U 和 L 的顺序任意</p>
<blockquote>
<p>85         /<em> 十进制 </em>/<br>0213       /<em> 八进制 </em>/<br>0x4b       /<em> 十六进制 </em>/<br>30         /<em> 整数 </em>/<br>30u        /<em> 无符号整数 </em>/<br>30l        /<em> 长整数 </em>/<br>30ul       /<em> 无符号长整数 </em>/</p>
</blockquote>
<h2 id="浮点常量"><a href="#浮点常量" class="headerlink" title="浮点常量"></a>浮点常量</h2><h2 id="定义常量"><a href="#定义常量" class="headerlink" title="定义常量"></a>定义常量</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> L1 10; <span class="comment">//使用的覅额与处理器</span></span></span><br><span class="line">count <span class="keyword">int</span> a=<span class="number">10</span> ;</span><br></pre></td></tr></table></figure>
<h2 id="存储类"><a href="#存储类" class="headerlink" title="存储类"></a>存储类</h2><p>存储类定义 C 程序中变量/函数的范围（可见性）和生命周期。这些说明符放置在它们所修饰的类型之前。下面列出 C 程序中可用的存储类：auto , register, static , extern</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="keyword">auto</span> <span class="keyword">int</span> mount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="auto-存储类"><a href="#auto-存储类" class="headerlink" title="auto 存储类"></a>auto 存储类</h3><p>auto存储类是所有局部变量默认的存储类，只能修饰局部变量</p>
<h3 id="register-存储类"><a href="#register-存储类" class="headerlink" title="register 存储类"></a>register 存储类</h3><p><strong>register</strong> 存储类用于定义存储在寄存器中而不是 RAM 中的局部变量。这意味着变量的最大尺寸等于寄存器的大小（通常是一个词），且不能对它应用一元的 ‘&amp;’ 运算符（因为它没有内存位置）。</p>
<blockquote>
<p>寄存器只用于需要快速访问的变量，比如计数器</p>
</blockquote>
<h3 id="static-存储类"><a href="#static-存储类" class="headerlink" title="static 存储类"></a>static 存储类</h3><p><strong>static</strong> 存储类指示编译器在程序的生命周期内保持局部变量的存在，而不需要在每次它进入和离开作用域时进行创建和销毁。因此，</p>
<blockquote>
<p>使用 static 修饰局部变量可以在函数调用之间保持局部变量的值。(只初始化一次)</p>
</blockquote>
<p>static 修饰符也可以应用于全局变量。当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。</p>
<blockquote>
<p>全局声明的一个 static 变量或方法可以被任何函数或方法调用，只要这些方法出现在跟 static 变量或方法同一个文件中。</p>
</blockquote>
<h3 id="extern-存储类"><a href="#extern-存储类" class="headerlink" title="extern 存储类"></a>extern 存储类</h3><p><strong>extern</strong> 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。当您使用 <strong>extern</strong> 时，对于无法初始化的变量，会把变量名指向一个之前定义过的存储位置。</p>
<p>当您有多个文件且定义了一个可以在其他文件中使用的全局变量或函数时，可以在其他文件中使用 <em>extern</em> 来得到已定义的变量或函数的引用。可以这么理解，</p>
<blockquote>
<p><em>extern</em> 是用来在另一个文件中声明一个全局变量或函数。</p>
</blockquote>
<p>extern 修饰符通常用于当有两个或多个文件共享相同的全局变量或函数的时候，如下所示：</p>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h3><div class="table-container">
<table>
<thead>
<tr>
<th>/</th>
<th>分子除以分母，向下取整</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>a++ 先赋值后运算 ； ++ a 先运算后赋值</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>&amp;&amp;   ， ||  ， ！</p>
<h3 id="杂项运算符"><a href="#杂项运算符" class="headerlink" title="杂项运算符"></a>杂项运算符</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">sizeof()</td>
<td style="text-align:left">返回变量的大小。</td>
<td style="text-align:left">sizeof(a) 将返回 4，其中 a 是整数。</td>
</tr>
<tr>
<td style="text-align:left">&amp;</td>
<td style="text-align:left">返回变量的地址。</td>
<td style="text-align:left">&a; 将给出变量的实际地址。</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">指向一个变量。</td>
<td style="text-align:left"><em>a; 将指向一个变量。（a为地址，</em>*a为该地址的变量）</td>
</tr>
<tr>
<td style="text-align:left">? :</td>
<td style="text-align:left">条件表达式</td>
<td style="text-align:left">如果条件为真 ? 则值为 X : 否则值为 Y</td>
</tr>
</tbody>
</table>
</div>
<h2 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h2><p>if , if…else ,  switch</p>
<p>C 语言把任何<strong>非零</strong>和<strong>非空</strong>的值假定为 <strong>true</strong>，把<strong>零</strong>或 <strong>null</strong> 假定为 <strong>false</strong>。</p>
<blockquote>
<p>运算符(三元运算符):  Exp1 ? Exp2 : Exp3;</p>
<p>如果exp1为真 则运行exp2，否则运行exp3</p>
</blockquote>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><p>while ,  do … while , for</p>
<blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( init; condition; increment )</span><br><span class="line">&#123;</span><br><span class="line">   statement(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">/* for 循环执行 */</span></span><br><span class="line">   <span class="keyword">for</span>( <span class="keyword">int</span> a = <span class="number">10</span>; a &lt; <span class="number">20</span>; a = a + <span class="number">1</span> )</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;a 的值： %d\n&quot;</span>, a);</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="循环控制语句"><a href="#循环控制语句" class="headerlink" title="循环控制语句"></a>循环控制语句</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">控制语句</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.runoob.com/cprogramming/c-break-statement.html">break 语句</a></td>
<td style="text-align:left">终止<strong>循环</strong>或 <strong>switch</strong> 语句，程序流将继续执行紧接着循环或 switch 的下一条语句。</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.runoob.com/cprogramming/c-continue-statement.html">continue 语句</a></td>
<td style="text-align:left">告诉一个循环体立刻停止本次循环迭代，重新开始下次循环迭代。</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.runoob.com/cprogramming/c-goto-statement.html">goto 语句</a></td>
<td style="text-align:left">将控制转移到被标记的语句。但是不建议在程序中使用 goto 语句。</td>
</tr>
</tbody>
</table>
</div>
<p>无限循环</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (;;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;一直执行&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>每个 C 程序都至少有一个函数，即主函数 <strong>main()</strong> </p>
<p>函数还有很多叫法，比如方法、子例程或程序，等等。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">return_type <span class="title">function_name</span><span class="params">( parameter <span class="built_in">list</span> )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   body of the function</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 C 语言中，函数由一个函数头和一个函数主体组成。下面列出一个函数的所有组成部分：</p>
<h3 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h3><p>在函数调用之前要进行声明</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">return_type <span class="title">function_name</span><span class="params">( parameter <span class="built_in">list</span> )</span></span>;</span><br></pre></td></tr></table></figure>
<p>针对上面定义的函数 max()，以下是函数声明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int max(int num1, int num2);</span><br></pre></td></tr></table></figure>
<p>在函数声明中，参数的名称并不重要，只有参数的类型是必需的，因此下面也是有效的声明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int max(int, int);</span><br></pre></td></tr></table></figure>
<h3 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h3><p>传值调用，引用调用</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/* 函数声明 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> *x, <span class="keyword">int</span> *y)</span></span>; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">/* 局部变量定义 */</span></span><br><span class="line">   <span class="keyword">int</span> a = <span class="number">100</span>;</span><br><span class="line">   <span class="keyword">int</span> b = <span class="number">200</span>;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;交换前，a 的值： %d\n&quot;</span>, a );</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;交换前，b 的值： %d\n&quot;</span>, b );</span><br><span class="line">   <span class="comment">/* 调用函数来交换值</span></span><br><span class="line"><span class="comment">    * &amp;a 表示指向 a 的指针，即变量 a 的地址</span></span><br><span class="line"><span class="comment">    * &amp;b 表示指向 b 的指针，即变量 b 的地址</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   swap(&amp;a, &amp;b);</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;交换后，a 的值： %d\n&quot;</span>, a );</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;交换后，b 的值： %d\n&quot;</span>, b );</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="作用域规则"><a href="#作用域规则" class="headerlink" title="作用域规则"></a>作用域规则</h2><p><strong>全局变量与局部变量在内存中的区别</strong>：</p>
<ul>
<li>全局变量保存在内存的全局存储区中，占用静态的存储单元；</li>
<li>局部变量保存在栈中，只有在所在函数被调用时才动态地为变量分配存储单元。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2020/01/02/2_%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/02/2_%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-02 09:46:38" itemprop="dateCreated datePublished" datetime="2020-01-02T09:46:38+08:00">2020-01-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h1 id="文本特征提取"><a href="#文本特征提取" class="headerlink" title="文本特征提取"></a>文本特征提取</h1><h2 id="TF-IDF"><a href="#TF-IDF" class="headerlink" title="TF-IDF"></a>TF-IDF</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/The_lastest/article/details/79093407">链接</a></p>
<blockquote>
<p>TF-IDF是传统的统计算法，用于评估一个词在一个文档集中对于某一个文档的重要程度。它与这个词在当前文档中的词频成正比，与文档集中的其他词频成反比</p>
</blockquote>
<p>x:多个文档，如多个电影评论</p>
<p>y:针对每个文档可以提取关键词</p>
<h1 id="gensim"><a href="#gensim" class="headerlink" title="gensim"></a>gensim</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/CoderPai/article/details/80250380">https://blog.csdn.net/CoderPai/article/details/80250380</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#train</span></span><br><span class="line"><span class="keyword">from</span> gensim.test.utils <span class="keyword">import</span> common_texts, get_tmpfile</span><br><span class="line"><span class="keyword">from</span> gensim.models <span class="keyword">import</span> Word2Vec</span><br><span class="line">model_name=<span class="string">&#x27;test&#x27;</span></span><br><span class="line">path = get_tmpfile(model_name + <span class="string">&#x27;.model&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> params <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&#x27;size&#x27;</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">&#x27;window&#x27;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="string">&#x27;min_count&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;workers&#x27;</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="string">&#x27;compute_loss&#x27;</span>: <span class="literal">True</span></span><br><span class="line">    &#125;</span><br><span class="line">model = Word2Vec([[<span class="string">&#x27;我&#x27;</span>,<span class="string">&#x27;是&#x27;</span>,<span class="string">&#x27;天才&#x27;</span>],[<span class="string">&#x27;你&#x27;</span>，<span class="string">&#x27;是&#x27;</span>，<span class="string">&#x27;呵呵&#x27;</span>]] **params)  <span class="comment"># get_latest_training_loss().</span></span><br><span class="line">model.save(path)</span><br><span class="line"><span class="comment">#pred</span></span><br><span class="line">model=Word2Vec.load(path)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<ul>
<li>size: 词向量的维度。</li>
<li>alpha: 模型初始的学习率。</li>
<li>window: 表示在一个句子中，当前词于预测词在一个句子中的最大距离。</li>
<li>min_count: 用于过滤操作，词频少于 min_count 次数的单词会被丢弃掉，默认值为 5。</li>
<li>max_vocab_size: 设置词向量构建期间的 RAM 限制。如果所有的独立单词数超过这个限定词，那么就删除掉其中词频最低的那个。根据统计，每一千万个单词大概需要 1GB 的RAM。如果我们把该值设置为 None ，则没有限制。</li>
<li>sample: 高频词汇的随机降采样的配置阈值，默认为 1e-3，范围是 (0, 1e-5)。</li>
<li>seed: 用于随机数发生器。与词向量的初始化有关。</li>
<li>workers: 控制训练的并行数量。</li>
<li>min_alpha: 随着训练进行，alpha 线性下降到 min_alpha。</li>
<li>sg: 用于设置训练算法。当 sg=0，使用 CBOW 算法来进行训练；当 sg=1，使用 skip-gram 算法来进行训练。</li>
<li>hs: 如果设置为 1 ，那么系统会采用 hierarchica softmax 技巧。如果设置为 0（默认情况），则系统会采用 negative samping 技巧。</li>
<li>negative: 如果这个值大于 0，那么 negative samping 会被使用。该值表示 “noise words” 的数量，一般这个值是 5 - 20，默认是 5。如果这个值设置为 0，那么 negative samping 没有使用。</li>
<li>cbow_mean: 如果这个值设置为 0，那么就采用上下文词向量的总和。如果这个值设置为 1 （默认情况下），那么我们就采用均值。但这个值只有在使用 CBOW 的时候才起作用。</li>
<li>hashfxn: hash函数用来初始化权重，默认情况下使用 Python 自带的 hash 函数。</li>
<li>iter: 算法迭代次数，默认为 5。</li>
<li>trim_rule: 用于设置词汇表的整理规则，用来指定哪些词需要被剔除，哪些词需要保留。默认情况下，如果 word count &lt; min_count，那么该词被剔除。这个参数也可以被设置为 None，这种情况下 min_count 会被使用。</li>
<li>sorted_vocab: 如果这个值设置为 1（默认情况下），则在分配 word index 的时候会先对单词基于频率降序排序。</li>
<li>batch_words: 每次批处理给线程传递的单词的数量，默认是 10000。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2019/12/04/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/awk/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/04/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/awk/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-12-04 11:32:02" itemprop="dateCreated datePublished" datetime="2019-12-04T11:32:02+08:00">2019-12-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h1 id="AWK"><a href="#AWK" class="headerlink" title="AWK"></a>AWK</h1><h2 id="1-格式"><a href="#1-格式" class="headerlink" title="1. 格式"></a>1. 格式</h2><h3 id="1-命令形式"><a href="#1-命令形式" class="headerlink" title="1). 命令形式"></a>1). 命令形式</h3><p><code>awk [-F|-f|-v] ‘BEGIN&#123;&#125; //&#123;command1; command2&#125; END&#123;&#125;’ file</code></p>
<blockquote>
<p>BEGIN{ 这里面放的是执行前的语句 } ，其中的语句只会运行一次<br>END {这里面放的是处理完所有的行后要执行的语句 } 。其中的语句也只会运行一次<br>{这里面放的是处理每一行时要执行的语句} ，这里的语句会读文件的每行都运行一次</p>
</blockquote>
<p> [-F|-f|-v]   大参数，-F指定分隔符，-f调用脚本，-v定义变量 var=value</p>
<p>‘  ‘          引用代码块</p>
<p>BEGIN   初始化代码块，在对每一行进行处理之前，初始化代码，主要是引用全局变量，设置FS分隔符</p>
<p>//           匹配代码块，可以是字符串或正则表达式</p>
<p>{}           命令代码块，包含一条或多条命令</p>
<p>；          多条命令使用分号分隔</p>
<p>END      结尾代码块，在对每一行进行处理之后再执行的代码块，主要是进行最终计算或输出结尾摘要信息</p>
<h3 id="2-特殊要点"><a href="#2-特殊要点" class="headerlink" title="2). 特殊要点"></a>2). 特殊要点</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chengmo/archive/2010/10/06/1844818.html">linux awk 内置变量使用介绍</a></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>特殊符号</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>$0</td>
<td>表示整个当前行</td>
</tr>
<tr>
<td>$1</td>
<td>每行第一个字段</td>
</tr>
<tr>
<td>NF</td>
<td>字段数量变量</td>
</tr>
<tr>
<td>NR</td>
<td>每行的记录号，多文件记录递增</td>
</tr>
<tr>
<td>FNR</td>
<td>与NR类似，不过多文件记录不递增，每个文件都从1开始</td>
</tr>
<tr>
<td>\t</td>
<td>制表符</td>
</tr>
<tr>
<td>\n</td>
<td>换行符</td>
</tr>
<tr>
<td>FS</td>
<td>BEGIN时定义分隔符，输入字段分隔符 默认是空格</td>
</tr>
<tr>
<td>RS</td>
<td>输入的记录分隔符， 默认为换行符(即文本是按一行一行输入)</td>
</tr>
<tr>
<td>~</td>
<td>匹配，与==相比不是精确比较</td>
</tr>
<tr>
<td>!~</td>
<td>不匹配，不精确比较</td>
</tr>
<tr>
<td>==</td>
<td>等于，必须全部相等，精确比较</td>
</tr>
<tr>
<td>!=</td>
<td>不等于，精确比较</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>逻辑与</td>
</tr>
<tr>
<td>\</td>
<td>\</td>
<td></td>
<td>逻辑或</td>
</tr>
<tr>
<td>+</td>
<td>匹配时表示1个或1个以上</td>
</tr>
<tr>
<td>/[0-9][0-9]+/</td>
<td>两个或两个以上数字</td>
</tr>
<tr>
<td>/[0-9][0-9]*/</td>
<td>一个或一个以上数字</td>
</tr>
<tr>
<td>FILENAME</td>
<td>文件名</td>
</tr>
<tr>
<td>OFS</td>
<td>输出字段分隔符， 默认也是空格，可以改为制表符等</td>
</tr>
<tr>
<td>ORS</td>
<td>输出的记录分隔符，默认为换行符,即处理结果也是一行一行输出到屏幕</td>
</tr>
<tr>
<td>-F’[:#/]’</td>
<td>定义三个分隔符</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-内置函数"><a href="#2-内置函数" class="headerlink" title="2. 内置函数"></a>2. 内置函数</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chengmo/archive/2010/10/08/1845913.html">linux awk 内置函数详细介绍</a></p>
<blockquote>
<p>这篇博客的函数都写在begin{}中</p>
</blockquote>
<h3 id="1-算术函数"><a href="#1-算术函数" class="headerlink" title="1). 算术函数"></a>1). 算术函数</h3><div class="table-container">
<table>
<thead>
<tr>
<th><strong>函数名</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>atan2( y, x )</td>
<td>返回 y/x 的反正切。</td>
</tr>
<tr>
<td>cos( x )</td>
<td>返回 x 的余弦；x 是弧度。</td>
</tr>
<tr>
<td>sin( x )</td>
<td>返回 x 的正弦；x 是弧度。</td>
</tr>
<tr>
<td>exp( x )</td>
<td>返回 x 幂函数。</td>
</tr>
<tr>
<td>log( x )</td>
<td>返回 x 的自然对数。</td>
</tr>
<tr>
<td>sqrt( x )</td>
<td>返回 x 平方根。</td>
</tr>
<tr>
<td>int( x )</td>
<td>返回 x 的截断至整数的值。</td>
</tr>
<tr>
<td>rand( )</td>
<td>返回任意数字 n，其中 0 &lt;= n &lt; 1。</td>
</tr>
<tr>
<td>srand( [Expr] )</td>
<td>将 rand 函数的种子值设置为 Expr 参数的值。返回先前的种子值。</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># OFMT 设置输出数据格式是保留3位小数</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;OFMT=&quot;%.3f&quot;;fs=sin(1);fe=exp(10);fl=log(10);fi=int(3.1415);print fs,fe,fl,fi;&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 0.841 22026.466 2.303 3 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获得随机数：</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;srand();fr=int(100*rand());print fr;&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 78</span></span><br></pre></td></tr></table></figure>
<h3 id="2-字符串函数"><a href="#2-字符串函数" class="headerlink" title="2). 字符串函数"></a>2). 字符串函数</h3><div class="table-container">
<table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>gsub( Ere, Repl, [ In ] )</td>
<td>除了正则表达式所有具体值被替代这点，它和 sub 函数完全一样地执行，。</td>
</tr>
<tr>
<td>sub( Ere, Repl, [ In ] )</td>
<td>用 Repl 参数指定的字符串替换 In 参数指定的字符串中的由 Ere  参数指定的扩展正则表达式的第一个具体值。sub 函数返回替换的数量。出现在 Repl 参数指定的字符串中的 &amp;（和符号）由 In  参数指定的与 Ere 参数的指定的扩展正则表达式匹配的字符串替换。如果未指定 In 参数，缺省值是整个记录（$0 记录变量）。</td>
</tr>
<tr>
<td>index( String1, String2 )</td>
<td>在由 String1 参数指定的字符串（其中有出现 String2 指定的参数）中，返回位置，从 1 开始编号。如果 String2 参数不在 String1 参数中出现，则返回 0（零）。</td>
</tr>
<tr>
<td>length [(String)]</td>
<td>返回 String 参数指定的字符串的长度（字符形式）。如果未给出 String 参数，则返回整个记录的长度（$0 记录变量）。</td>
</tr>
<tr>
<td>blength [(String)]</td>
<td>返回 String 参数指定的字符串的长度（以字节为单位）。如果未给出 String 参数，则返回整个记录的长度（$0 记录变量）。</td>
</tr>
<tr>
<td>substr( String, M, [ N ] )</td>
<td>返回具有 N 参数指定的字符数量子串。子串从 String  参数指定的字符串取得，其字符以 M 参数指定的位置开始。M 参数指定为将 String 参数中的第一个字符作为编号 1。如果未指定 N  参数，则子串的长度将是 M 参数指定的位置到 String 参数的末尾 的长度。</td>
</tr>
<tr>
<td>match( String, Ere )</td>
<td>在 String 参数指定的字符串（Ere  参数指定的扩展正则表达式出现在其中）中返回位置（字符形式），从 1 开始编号，或如果 Ere 参数不出现，则返回 0（零）。RSTART  特殊变量设置为返回值。RLENGTH 特殊变量设置为匹配的字符串的长度，或如果未找到任何匹配，则设置为 -1（负一）。</td>
</tr>
<tr>
<td>split( String, A, [Ere] )</td>
<td>将 String 参数指定的参数分割为数组元素 A[1], A[2], . .  ., A[n]，并返回 n 变量的值。此分隔可以通过 Ere 参数指定的扩展正则表达式进行，或用当前字段分隔符（FS  特殊变量）来进行（如果没有给出 Ere 参数）。除非上下文指明特定的元素还应具有一个数字值，否则 A 数组中的元素用字符串值来创建。</td>
</tr>
<tr>
<td>tolower( String )</td>
<td>返回 String 参数指定的字符串，字符串中每个大写字符将更改为小写。大写和小写的映射由当前语言环境的 LC_CTYPE 范畴定义。</td>
</tr>
<tr>
<td>toupper( String )</td>
<td>返回 String 参数指定的字符串，字符串中每个小写字符将更改为大写。大写和小写的映射由当前语言环境的 LC_CTYPE 范畴定义。</td>
</tr>
<tr>
<td>sprintf(Format, Expr, Expr, . . . )</td>
<td>根据 Format 参数指定的 <a target="_blank" rel="noopener" href="http://www.cnblogs.com/chengmo/admin/zh_CN/libs/basetrf1/printf.htm#a8zed0gaco">printf</a> 子例程格式字符串来格式化 Expr 参数指定的表达式并返回最后生成的字符串。</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>Ere都可以是正则表达式</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 info中查找满足正则表达式，/[0-9]+/ 用””替换，并且替换后的值，赋值给info 未给info值，默认是$0</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2010test!&quot;;gsub(/[0-9]+/,&quot;!&quot;,info);print info&#125;&#x27;</span> </span><br><span class="line"><span class="comment"># this is a test!test!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找字符串（index使用）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2010test!&quot;;print index(info,&quot;test&quot;)?&quot;ok&quot;:&quot;no found&quot;;&#125;&#x27;</span></span><br><span class="line"><span class="comment"># ok</span></span><br><span class="line"><span class="comment"># 未找到，返回0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 正则表达式匹配查找(match使用）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2010test!&quot;;print match(info,/[0-9]+/)?&quot;ok&quot;:&quot;no found&quot;;&#125;&#x27;</span>   <span class="comment"># ok </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 截取字符串(substr使用）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2010test!&quot;;print substr(info,4,10);&#125;&#x27;</span></span><br><span class="line"><span class="comment"># s is a tes</span></span><br><span class="line"><span class="comment"># 从第 4个 字符开始，截取10个长度字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串分割（split使用）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test&quot;;split(info,tA,&quot; &quot;);print length(tA);for(k in tA)&#123;print k,tA[k];&#125;&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"><span class="comment"># 4 test</span></span><br><span class="line"><span class="comment"># 1 this</span></span><br><span class="line"><span class="comment"># 2 is</span></span><br><span class="line"><span class="comment"># 3 a</span></span><br><span class="line"><span class="comment"># 分割info,动态创建数组tA,这里比较有意思，awk for …in 循环，是一个无序的循环。 并不是从数组下标1…n ，因此使用时候需要注意。</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>awk for …in 循环，是一个无序的循环。 并不是从数组下标1…n ，因此使用时候需要注意</p>
<p>应该是因为awk中数组其实是字段。</p>
</blockquote>
<p><strong>格式化字符串输出（sprintf使用）</strong></p>
<p>格式化字符串包括两部分内容: 一部分是正常字符, 这些字符将按原样输出; 另一部分是格式化规定字符, 以”%”开始, 后跟一个或几个规定字符,用来确定输出内容格式。 </p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>格式符</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>%d</td>
<td>十进制有符号整数</td>
</tr>
<tr>
<td>%u</td>
<td>十进制无符号整数</td>
</tr>
<tr>
<td>%f</td>
<td>浮点数</td>
</tr>
<tr>
<td>%s</td>
<td>字符串</td>
</tr>
<tr>
<td>%c</td>
<td>单个字符</td>
</tr>
<tr>
<td>%p</td>
<td>指针的值</td>
</tr>
<tr>
<td>%e</td>
<td>指数形式的浮点数</td>
</tr>
<tr>
<td>%x</td>
<td>%X 无符号以十六进制表示的整数</td>
</tr>
<tr>
<td>%o</td>
<td>无符号以八进制表示的整数</td>
</tr>
<tr>
<td>%g</td>
<td>自动选择合适的表示法</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;BEGIN&#123;n1=124.113;n2=-1.224;n3=1.2345; printf(&quot;%.2f,%.2u,%.2g,%X,%o\n&quot;,n1,n2,n3,n1,n1);&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 124.11,18446744073709551615,1.2,7C,174 </span></span><br></pre></td></tr></table></figure>
<h3 id="3-时间函数"><a href="#3-时间函数" class="headerlink" title="3). 时间函数"></a>3). 时间函数</h3><div class="table-container">
<table>
<thead>
<tr>
<th><strong>函数名</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>mktime( YYYY MM DD HH MM SS[ DST])</td>
<td>生成时间格式</td>
</tr>
<tr>
<td>strftime([format [, timestamp]])</td>
<td>格式化时间输出，将时间戳转为时间字符串  具体格式，见下表.</td>
</tr>
<tr>
<td>systime()</td>
<td>得到时间戳,返回从1970年1月1日开始到当前时间(不计闰年)的整秒数</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建指定时间(mktime使用）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;tstamp=mktime(&quot;2001 01 01 12 12 12&quot;);print strftime(&quot;%c&quot;,tstamp);&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 2001年01月01日 星期一 12时12分12秒 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 求2个时间段中间时间差,介绍了strftime使用方法 </span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;tstamp1=mktime(&quot;2001 01 01 12 12 12&quot;);tstamp2=mktime(&quot;2001 02 01 0 0 0&quot;);print tstamp2-tstamp1;&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 2634468 </span></span><br><span class="line"></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;tstamp1=mktime(&quot;2001 01 01 12 12 12&quot;);tstamp2=systime();print tstamp2-tstamp1;&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 308201392 </span></span><br></pre></td></tr></table></figure>
<p><strong>strftime日期和时间格式说明符</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>格式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>%a</td>
<td>星期几的缩写(Sun)</td>
</tr>
<tr>
<td>%A</td>
<td>星期几的完整写法(Sunday)</td>
</tr>
<tr>
<td>%b</td>
<td>月名的缩写(Oct)</td>
</tr>
<tr>
<td>%B</td>
<td>月名的完整写法(October)</td>
</tr>
<tr>
<td>%c</td>
<td>本地日期和时间</td>
</tr>
<tr>
<td>%d</td>
<td>十进制日期</td>
</tr>
<tr>
<td>%D</td>
<td>日期 08/20/99</td>
</tr>
<tr>
<td>%e</td>
<td>日期，如果只有一位会补上一个空格</td>
</tr>
<tr>
<td>%H</td>
<td>用十进制表示24小时格式的小时</td>
</tr>
<tr>
<td>%I</td>
<td>用十进制表示12小时格式的小时</td>
</tr>
<tr>
<td>%j</td>
<td>从1月1日起一年中的第几天</td>
</tr>
<tr>
<td>%m</td>
<td>十进制表示的月份</td>
</tr>
<tr>
<td>%M</td>
<td>十进制表示的分钟</td>
</tr>
<tr>
<td>%p</td>
<td>12小时表示法(AM/PM)</td>
</tr>
<tr>
<td>%S</td>
<td>十进制表示的秒</td>
</tr>
<tr>
<td>%U</td>
<td>十进制表示的一年中的第几个星期(星期天作为一个星期的开始)</td>
</tr>
<tr>
<td>%w</td>
<td>十进制表示的星期几(星期天是0)</td>
</tr>
<tr>
<td>%W</td>
<td>十进制表示的一年中的第几个星期(星期一作为一个星期的开始)</td>
</tr>
<tr>
<td>%x</td>
<td>重新设置本地日期(08/20/99)</td>
</tr>
<tr>
<td>%X</td>
<td>重新设置本地时间(12：00：00)</td>
</tr>
<tr>
<td>%y</td>
<td>两位数字表示的年(99)</td>
</tr>
<tr>
<td>%Y</td>
<td>当前月份</td>
</tr>
<tr>
<td>%Z</td>
<td>时区(PDT)</td>
</tr>
<tr>
<td>%%</td>
<td>百分号(%)</td>
</tr>
</tbody>
</table>
</div>
<h3 id="4-一般函数"><a href="#4-一般函数" class="headerlink" title="4). 一般函数"></a>4). 一般函数</h3><div class="table-container">
<table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>close( Expression )</td>
<td>用同一个带字符串值的 Expression 参数来关闭由 print 或  printf 语句打开的或调用 getline 函数打开的文件或管道。如果文件或管道成功关闭，则返回  0；其它情况下返回非零值。如果打算写一个文件，并稍后在同一个程序中读取文件，则 close 语句是必需的。</td>
</tr>
<tr>
<td>system(Command )</td>
<td>执行 Command 参数指定的命令，并返回退出状态。等同于 <a target="_blank" rel="noopener" href="http://www.cnblogs.com/chengmo/admin/zh_CN/libs/basetrf2/system.htm#a181929c">system</a> 子例程。</td>
</tr>
<tr>
<td>Expression \</td>
<td>getline [ Variable ]</td>
<td>从来自 Expression 参数指定的命令的输出中通过管道传送的流中读取一个输入记录，并将该记录的值指定给 Variable 参数指定的变量。如果当前未打开将 Expression 参数的值作为其命令名称的流，则创建流。创建的流等同于调用 <a target="_blank" rel="noopener" href="http://www.cnblogs.com/chengmo/admin/zh_CN/libs/basetrf1/popen.htm#sk62b0shad">popen</a>  子例程，此时 Command 参数取 Expression 参数的值且 Mode 参数设置为一个是 r 的值。只要流保留打开且  Expression 参数求得同一个字符串，则对 getline 函数的每次后续调用读取另一个记录。如果未指定 Variable 参数，则 $0  记录变量和 NF 特殊变量设置为从流读取的记录。</td>
</tr>
<tr>
<td>getline [ Variable ] &lt; Expression</td>
<td>从 Expression 参数指定的文件读取输入的下一个记录，并将  Variable 参数指定的变量设置为该记录的值。只要流保留打开且 Expression 参数对同一个字符串求值，则对 getline  函数的每次后续调用读取另一个记录。如果未指定 Variable 参数，则 $0 记录变量和 NF 特殊变量设置为从流读取的记录。</td>
</tr>
<tr>
<td>getline [ Variable ]</td>
<td>将 Variable 参数指定的变量设置为从当前输入文件读取的下一个输入记录。如果未指定 Variable 参数，则 $0 记录变量设置为该记录的值，还将设置 NF、NR 和 FNR 特殊变量。</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开外部文件（close用法）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;while(&quot;cat /etc/passwd&quot;|getline)&#123;print $0;&#125;;close(&quot;/etc/passwd&quot;);&#125;&#x27;</span></span><br><span class="line"><span class="comment"># root:x:0:0:root:/root:/bin/bash</span></span><br><span class="line"><span class="comment"># bin:x:1:1:bin:/bin:/sbin/nologin</span></span><br><span class="line"><span class="comment"># daemon:x:2:2:daemon:/sbin:/sbin/nologin </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 逐行读取外部文件(getline使用方法）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;while(getline &lt; &quot;/etc/passwd&quot;)&#123;print $0;&#125;;close(&quot;/etc/passwd&quot;);&#125;&#x27;</span></span><br><span class="line"><span class="comment"># root:x:0:0:root:/root:/bin/bash</span></span><br><span class="line"><span class="comment"># bin:x:1:1:bin:/bin:/sbin/nologin</span></span><br><span class="line"><span class="comment"># daemon:x:2:2:daemon:/sbin:/sbin/nologin </span></span><br><span class="line"></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;print &quot;Enter your name:&quot;;getline name;print name;&#125;&#x27;</span></span><br><span class="line"><span class="comment"># Enter your name:</span></span><br><span class="line"><span class="comment"># wangdongdong</span></span><br><span class="line"><span class="comment"># wangdongdong</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用外部应用程序(system使用方法）</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;b=system(&quot;python helloworld.py&quot;);print b;&#125;&#x27;</span></span><br><span class="line"><span class="comment"># helloworld</span></span><br><span class="line"><span class="comment"># 0</span></span><br></pre></td></tr></table></figure>
<h2 id="3-数组"><a href="#3-数组" class="headerlink" title="3. 数组"></a>3. 数组</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chengmo/archive/2010/10/08/1846190.html">linux awk数组操作详细介绍</a></p>
<h2 id="4-案例"><a href="#4-案例" class="headerlink" title="4. 案例"></a>4. 案例</h2><h3 id="1-print"><a href="#1-print" class="headerlink" title="1). print"></a>1). print</h3><p>print 是awk打印指定内容的主要命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print&#125;&#x27;</span> /etc/passwd == awk <span class="string">&#x27;&#123;print $0&#125;&#x27;</span> /etc/passwd </span><br><span class="line">awk <span class="string">&#x27;&#123;print &quot; &quot;&#125;&#x27;</span> /etc/passwd <span class="comment">#不输出passwd的内容，而是输出相同个数的空行，进一步解释了awk是一行一行处理文本</span></span><br><span class="line">awk <span class="string">&#x27;&#123;print &quot;a&quot;&#125;&#x27;</span> /etc/passwd <span class="comment">#输出相同个数的a行，一行只有一个a字母</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> /etc/passwd </span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print $1; print $2&#125;&#x27;</span> /etc/passwd <span class="comment">#将每一行的前二个字段，分行输出，进一步理解一行一行处理文本</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print $1,$3,$6&#125;&#x27;</span> OFS=<span class="string">&quot;\t&quot;</span> /etc/passwd <span class="comment">#输出字段1,3,6，以制表符作为分隔符</span></span><br></pre></td></tr></table></figure>
<h3 id="2-f指定脚本文件"><a href="#2-f指定脚本文件" class="headerlink" title="2). -f指定脚本文件"></a>2). -f指定脚本文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">awk -f script.awk  file</span><br><span class="line"></span><br><span class="line"><span class="comment"># script.awk内容如下：</span></span><br><span class="line">BEGIN&#123;</span><br><span class="line">FS=<span class="string">&quot;:&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#123;<span class="built_in">print</span> <span class="variable">$1</span>&#125;   <span class="comment">#效果与awk -F&quot;:&quot; &#x27;&#123;print $1&#125;&#x27;相同,只是分隔符使用FS在代码自身中指定</span></span><br><span class="line"></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;X=0&#125; /^$/&#123; X+=1 &#125; END&#123;print &quot;I find&quot;,X,&quot;blank lines.&quot;&#125;&#x27;</span> <span class="built_in">test</span> </span><br><span class="line"><span class="comment"># I find 4 blank lines.</span></span><br><span class="line"></span><br><span class="line">ls -l|awk <span class="string">&#x27;BEGIN&#123;sum=0&#125; !/^d/&#123;sum+=$5&#125; END&#123;print &quot;total size is&quot;,sum&#125;&#x27;</span> <span class="comment">#计算文件大小 </span></span><br><span class="line"><span class="comment">#total size is 17487</span></span><br></pre></td></tr></table></figure>
<h3 id="3-F指定分隔符"><a href="#3-F指定分隔符" class="headerlink" title="3). -F指定分隔符"></a>3). -F指定分隔符</h3><p>$1 指指定分隔符后，第一个字段，$3第三个字段， \t是制表符</p>
<p>一个或多个连续的空格或制表符看做一个定界符，即多个空格看做一个空格</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>  /etc/passwd</span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $1 $3&#125;&#x27;</span>  /etc/passwd <span class="comment">#$1与$3相连输出，不分隔</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $1,$3&#125;&#x27;</span>  /etc/passwd <span class="comment">#多了一个逗号，$1与$3使用空格分隔</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $1 &quot; &quot; $3&#125;&#x27;</span>  /etc/passwd <span class="comment">#$1与$3之间手动添加空格分隔</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print &quot;Username:&quot; $1 &quot;\t\t Uid:&quot; $3 &#125;&#x27;</span> /etc/passwd <span class="comment">#自定义输出  </span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print NF&#125;&#x27;</span> /etc/passwd <span class="comment">#显示每行有多少字段</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span> /etc/passwd <span class="comment">#将每行第NF个字段的值打印出来</span></span><br><span class="line">awk -F: <span class="string">&#x27;NF==4 &#123;print &#125;&#x27;</span> /etc/passwd <span class="comment">#显示只有4个字段的行</span></span><br><span class="line">awk -F: <span class="string">&#x27;NF&gt;2&#123;print $0&#125;&#x27;</span> /etc/passwd <span class="comment">#显示每行字段数量大于2的行</span></span><br><span class="line">awk <span class="string">&#x27;&#123;print NR,$0&#125;&#x27;</span> /etc/passwd <span class="comment">#输出每行的行号</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print NR,NF,$NF,&quot;\t&quot;,$0&#125;&#x27;</span> /etc/passwd <span class="comment">#依次打印行号，字段数，最后字段值，制表符，每行内容</span></span><br><span class="line">awk -F: <span class="string">&#x27;NR==5&#123;print&#125;&#x27;</span>  /etc/passwd <span class="comment">#显示第5行</span></span><br><span class="line">awk -F: <span class="string">&#x27;NR==5 || NR==6&#123;print&#125;&#x27;</span>  /etc/passwd <span class="comment">#显示第5行和第6行</span></span><br><span class="line">route -n|awk <span class="string">&#x27;NR!=1&#123;print&#125;&#x27;</span> <span class="comment">#不显示第一行</span></span><br></pre></td></tr></table></figure>
<h3 id="4-IF语句"><a href="#4-IF语句" class="headerlink" title="4). IF语句"></a>4). IF语句</h3><p>必须用在{}中，且比较内容用()扩起来</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&#x27;&#123;if($1~/mail/) print $1&#125;&#x27;</span> /etc/passwd <span class="comment">#简写</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;if($1~/mail/) &#123;print $1&#125;&#125;&#x27;</span> /etc/passwd <span class="comment">#全写</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;if($1~/mail/) &#123;print $1&#125; else &#123;print $2&#125;&#125;&#x27;</span> /etc/passwd <span class="comment">#if...else...</span></span><br><span class="line"></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;if($3&gt;100) print &quot;large&quot;; else print &quot;small&quot;&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&#x27;BEGIN&#123;A=0;B=0&#125; &#123;if($3&gt;100) &#123;A++; print &quot;large&quot;&#125; else &#123;B++; print &quot;small&quot;&#125;&#125; END&#123;print A,&quot;\t&quot;,B&#125;&#x27;</span> /etc/passwd  <span class="comment">#ID大于100,A加1，否则B加1</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;if($3&lt;100) next; else print&#125;&#x27;</span> /etc/passwd <span class="comment">#小于100跳过，否则显示</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print ($3&gt;100 ? &quot;yes&quot;:&quot;no&quot;)&#125;&#x27;</span>  /etc/passwd </span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print ($3&gt;100 ? $3&quot;:\tyes&quot;:$3&quot;:\tno&quot;)&#125;&#x27;</span>  /etc/passwd</span><br></pre></td></tr></table></figure>
<h3 id="5-条件表达式"><a href="#5-条件表达式" class="headerlink" title="5). 条件表达式"></a>5). 条件表达式</h3><p><strong>==   !=   &gt;   &gt;=</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;$1==&quot;mysql&quot;&#123;print $3&#125;&#x27;</span> /etc/passwd  </span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;if($1==&quot;mysql&quot;) print $3&#125;&#x27;</span> /etc/passwd <span class="comment">#与上面相同 </span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;$1!=&quot;mysql&quot;&#123;print $3&#125;&#x27;</span> /etc/passwd <span class="comment">#不等于</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;$3&gt;1000&#123;print $3&#125;&#x27;</span> /etc/passwd <span class="comment">#大于</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;$3&gt;=100&#123;print $3&#125;&#x27;</span> /etc/passwd <span class="comment">#大于等于</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;$3&lt;1&#123;print $3&#125;&#x27;</span> /etc/passwd <span class="comment">#小于</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;$3&lt;=1&#123;print $3&#125;&#x27;</span> /etc/passwd <span class="comment">#小于等于</span></span><br></pre></td></tr></table></figure>
<h3 id="6-逻辑运算符"><a href="#6-逻辑运算符" class="headerlink" title="6). 逻辑运算符"></a>6). 逻辑运算符</h3><p><strong>&amp;&amp;　||</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&#x27;$1~/mail/ &amp;&amp; $3&gt;8 &#123;print &#125;&#x27;</span> /etc/passwd <span class="comment">#逻辑与，$1匹配mail，并且$3&gt;8</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;if($1~/mail/ &amp;&amp; $3&gt;8) print &#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&#x27;$1~/mail/ || $3&gt;1000 &#123;print &#125;&#x27;</span> /etc/passwd <span class="comment">#逻辑或</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;if($1~/mail/ || $3&gt;1000) print &#125;&#x27;</span> /etc/passwd </span><br></pre></td></tr></table></figure>
<h3 id="7-数值运算"><a href="#7-数值运算" class="headerlink" title="7). 数值运算"></a>7). 数值运算</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&#x27;$3 &gt; 100&#x27;</span> /etc/passwd    </span><br><span class="line">awk -F: <span class="string">&#x27;$3 &gt; 100 || $3 &lt; 5&#x27;</span> /etc/passwd  </span><br><span class="line">awk -F: <span class="string">&#x27;$3+$4 &gt; 200&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&#x27;/mysql|mail/&#123;print $3+10&#125;&#x27;</span> /etc/passwd <span class="comment">#第三个字段加10打印 </span></span><br><span class="line">awk -F: <span class="string">&#x27;/mysql/&#123;print $3-$4&#125;&#x27;</span> /etc/passwd <span class="comment">#减法</span></span><br><span class="line">awk -F: <span class="string">&#x27;/mysql/&#123;print $3*$4&#125;&#x27;</span> /etc/passwd <span class="comment">#求乘积</span></span><br><span class="line">awk <span class="string">&#x27;/MemFree/&#123;print $2/1024&#125;&#x27;</span> /proc/meminfo <span class="comment">#除法</span></span><br><span class="line">awk <span class="string">&#x27;/MemFree/&#123;print int($2/1024)&#125;&#x27;</span> /proc/meminfo <span class="comment">#取整</span></span><br></pre></td></tr></table></figure>
<h3 id="8-输出分隔符OFS"><a href="#8-输出分隔符OFS" class="headerlink" title="8). 输出分隔符OFS"></a>8). 输出分隔符OFS</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;$6 ~ /FIN/ || NR==1 &#123;print NR,$4,$5,$6&#125;&#x27;</span> OFS=<span class="string">&quot;\t&quot;</span> netstat.txt</span><br><span class="line">awk <span class="string">&#x27;$6 ~ /WAIT/ || NR==1 &#123;print NR,$4,$5,$6&#125;&#x27;</span> OFS=<span class="string">&quot;\t&quot;</span> netstat.txt        </span><br><span class="line"><span class="comment">#输出字段6匹配WAIT的行，其中输出每行行号，字段4，5,6，并使用制表符分割字段</span></span><br></pre></td></tr></table></figure>
<h3 id="9-输出处理结果到文件"><a href="#9-输出处理结果到文件" class="headerlink" title="9). 输出处理结果到文件"></a>9). 输出处理结果到文件</h3><p>①在命令代码块中直接输出 route -n|awk ‘NR!=1{print &gt; “./fs”}’   </p>
<p>②使用重定向进行输出  route -n|awk ‘NR!=1{print}’  &gt; ./fs</p>
<h3 id="10-格式化输出"><a href="#10-格式化输出" class="headerlink" title="10). 格式化输出"></a>10). 格式化输出</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp|awk <span class="string">&#x27;&#123;printf &quot;%-8s %-8s %-10s\n&quot;,$1,$2,$3&#125;&#x27;</span> </span><br></pre></td></tr></table></figure>
<p>printf表示格式输出</p>
<p>%格式化输出分隔符</p>
<p>-8长度为8个字符</p>
<p>s表示字符串类型</p>
<p>打印每行前三个字段，指定第一个字段输出字符串类型(长度为8)，第二个字段输出字符串类型(长度为8),</p>
<p>第三个字段输出字符串类型(长度为10)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp|awk <span class="string">&#x27;$6==&quot;LISTEN&quot; || NR==1 &#123;printf &quot;%-10s %-10s %-10s \n&quot;,$1,$2,$3&#125;&#x27;</span></span><br><span class="line">netstat -anp|awk <span class="string">&#x27;$6==&quot;LISTEN&quot; || NR==1 &#123;printf &quot;%-3s %-10s %-10s %-10s \n&quot;,NR,$1,$2,$3&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="11-数组"><a href="#11-数组" class="headerlink" title="11). 数组"></a>11). 数组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp|awk <span class="string">&#x27;NR!=1&#123;a[$6]++&#125; END&#123;for (i in a) print i,&quot;\t&quot;,a[i]&#125;&#x27;</span></span><br><span class="line">netstat -anp|awk <span class="string">&#x27;NR!=1&#123;a[$6]++&#125; END&#123;for (i in a) \</span></span><br><span class="line"><span class="string">  printf &quot;%-20s %-10s %-5s \n&quot;, i,&quot;\t&quot;,a[i]&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="12-其他应用"><a href="#12-其他应用" class="headerlink" title="12). 其他应用"></a>12). 其他应用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&#x27;&#123;print NF&#125;&#x27;</span> helloworld.sh <span class="comment">#输出文件每行有多少字段</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print $1,$2,$3,$4,$5&#125;&#x27;</span> helloworld.sh <span class="comment">#输出前5个字段</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print $1,$2,$3,$4,$5&#125;&#x27;</span> OFS=<span class="string">&#x27;\t&#x27;</span> helloworld.sh <span class="comment">#输出前5个字段并使用制表符分隔输出</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print NR,$1,$2,$3,$4,$5&#125;&#x27;</span> OFS=<span class="string">&#x27;\t&#x27;</span> helloworld.sh <span class="comment">#制表符分隔输出前5个字段，并打印行号</span></span><br><span class="line">awk -F<span class="string">&#x27;[:#]&#x27;</span> <span class="string">&#x27;&#123;print NF&#125;&#x27;</span>  helloworld.sh <span class="comment">#指定多个分隔符: #，输出每行多少字段</span></span><br><span class="line">awk -F<span class="string">&#x27;[:#]&#x27;</span> <span class="string">&#x27;&#123;print $1,$2,$3,$4,$5,$6,$7&#125;&#x27;</span> OFS=<span class="string">&#x27;\t&#x27;</span> helloworld.sh <span class="comment">#制表符分隔输出多字段</span></span><br><span class="line">awk -F<span class="string">&#x27;[:#/]&#x27;</span> <span class="string">&#x27;&#123;print NF&#125;&#x27;</span> helloworld.sh <span class="comment">#指定三个分隔符，并输出每行字段数</span></span><br><span class="line">awk -F<span class="string">&#x27;[:#/]&#x27;</span> <span class="string">&#x27;&#123;print $1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12&#125;&#x27;</span> hi.sh <span class="comment">#制表符分隔输出多字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#计算/home目录下，普通文件的大小，使用KB作为单位</span></span><br><span class="line">ls -l|awk <span class="string">&#x27;BEGIN&#123;sum=0&#125; !/^d/&#123;sum+=$5&#125; END&#123;print &quot;total size is:&quot;,sum/1024,&quot;KB&quot;&#125;&#x27;</span></span><br><span class="line">ls -l|awk <span class="string">&#x27;BEGIN&#123;sum=0&#125; !/^d/&#123;sum+=$5&#125; END&#123;print &quot;total size is:&quot;,int(sum/1024),&quot;KB&quot;&#125;&#x27;</span> <span class="comment">#int是取整的意思</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#统计netstat -anp 状态为LISTEN和CONNECT的连接数量分别是多少</span></span><br><span class="line">netstat -anp|awk <span class="string">&#x27;$6~/LISTEN|CONNECTED/&#123;sum[$6]++&#125; END&#123;for (i in sum) printf &quot;%-10s %-6s %-3s \n&quot;, i,&quot; &quot;,sum[i]&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#统计/home目录下不同用户的普通文件的总数是多少？</span></span><br><span class="line">ls -l|awk <span class="string">&#x27;NR!=1 &amp;&amp; !/^d/&#123;sum[$3]++&#125; END&#123;for (i in sum) printf &quot;%-6s %-5s %-3s \n&quot;,i,&quot; &quot;,sum[i]&#125;&#x27;</span>   </span><br><span class="line"></span><br><span class="line"><span class="comment">#统计/home目录下不同用户的普通文件的大小总size是多少？</span></span><br><span class="line">ls -l|awk <span class="string">&#x27;NR!=1 &amp;&amp; !/^d/&#123;sum[$3]+=$5&#125; END&#123;for (i in sum) printf &quot;%-6s %-5s %-3s %-2s \n&quot;,i,&quot; &quot;,sum[i]/1024/1024,&quot;MB&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#输出成绩表</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;math=0;eng=0;com=0;printf &quot;Lineno.   Name    No.    Math   English   Computer    Total\n&quot;;printf &quot;------------------------------------------------------------\n&quot;&#125;&#123;math+=$3; eng+=$4; com+=$5;printf &quot;%-8s %-7s %-7s %-7s %-9s %-10s %-7s \n&quot;,NR,$1,$2,$3,$4,$5,$3+$4+$5&#125; END&#123;printf &quot;------------------------------------------------------------\n&quot;;printf &quot;%-24s %-7s %-9s %-20s \n&quot;,&quot;Total:&quot;,math,eng,com;printf &quot;%-24s %-7s %-9s %-20s \n&quot;,&quot;Avg:&quot;,math/NR,eng/NR,com/NR&#125;&#x27;</span> <span class="built_in">test</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="13-Vlookup"><a href="#13-Vlookup" class="headerlink" title="13). Vlookup"></a>13). Vlookup</h3><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/01906e4b7af7">awk实现excel vlookup</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据</span></span><br><span class="line">$ cat a.txt </span><br><span class="line">1       abc</span><br><span class="line">2       def</span><br><span class="line">3       ghi</span><br><span class="line">4       jlm</span><br><span class="line">$ cat b.txt </span><br><span class="line">3       shit</span><br><span class="line">1       rubb</span><br><span class="line"><span class="comment"># 方法</span></span><br><span class="line">awk <span class="string">&#x27;NR==FNR&#123;a[$1]=$2;next&#125;NR&gt;FNR&#123;if($1 in a)print $0&quot;\t&quot;a[$1]&#125;&#x27;</span> a.txt b.txt </span><br><span class="line"><span class="comment"># 3       shit    ghi</span></span><br><span class="line"><span class="comment"># 1       rubb    abc</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：a是一个字典，<code>NR==FNR</code>时在第一个文件，<code>NR&gt;FNR</code>时在读b.txt</p>
<p><code>NR==FNR&#123;a[$1]=$2;next&#125;</code>是使用第一个文件<code>a.txt</code>初始化字典，将其每行<code>$1</code>作为key，<code>$2</code>作为value</p>
<p><code>if($1 in a)</code>指序号<code>$1</code>是否在a的key中，如果在打印的<code>a[$1]</code>为key：<code>$1</code>对于的value</p>
<p>查看字典：<code>awk &#39;NR==FNR&#123;a[$1]=$2;next&#125;END&#123;for(k in a)&#123;print k,a[k]&#125;&#125;&#39; a.txt b.txt</code></p>
</blockquote>
<h3 id="14-group-by"><a href="#14-group-by" class="headerlink" title="14). group by"></a>14). group by</h3><p><a target="_blank" rel="noopener" href="http://www.cppblog.com/datouwang/articles/45582.html">总结一下awk的group by功能</a></p>
<p>通过数组的key作为作为on的条件，value进行聚合运算</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据</span></span><br><span class="line">cat c.txt</span><br><span class="line">06 01 06 30      2.700         81.000</span><br><span class="line">06 01 06 45      3.900        175.500</span><br><span class="line">06 01 07 00      2.400          0.000</span><br><span class="line">06 01 07 15      0.160          2.400</span><br><span class="line">06 01 08 00      0.380          0.000</span><br><span class="line">06 01 08 15      0.300          4.500</span><br><span class="line">06 01 08 30      3.900        117.000</span><br><span class="line">06 01 08 45      5.520        248.400</span><br><span class="line">06 01 09 00      6.600          0.000</span><br><span class="line">06 01 09 15      9.600        144.000</span><br><span class="line">06 01 09 30      3.300         99.000</span><br><span class="line">06 01 09 45      2.300        103.500</span><br><span class="line">06 01 10 15      7.880        118.200</span><br><span class="line">06 01 10 30     10.820        324.600</span><br><span class="line">06 01 10 45      7.360        331.200</span><br><span class="line">06 01 11 00     11.940          0.000</span><br><span class="line">06 01 11 15      4.200         63.000</span><br><span class="line">06 01 11 30      3.180         95.400</span><br><span class="line">06 01 11 45      1.800         81.000</span><br><span class="line">06 01 12 00     30.970          0.000</span><br><span class="line"><span class="comment"># 实现</span></span><br><span class="line"><span class="comment"># 单列group by单列聚合</span></span><br><span class="line">awk <span class="string">&#x27;&#123;a[$2]+=$5&#125;END&#123;for(i in a) printf &quot;%s %10.3f\n&quot;,i,a[i]&#125;&#x27;</span> c.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单列group by多列聚合</span></span><br><span class="line">awk <span class="string">&#x27;&#123;a[$2]+=$5;b[$2]+=$6&#125;END&#123;for(i in a) printf &quot;%s %10.3f %14.3f\n&quot;,i,a[i],b[i]&#125;&#x27;</span> c.txt </span><br><span class="line"></span><br><span class="line"><span class="comment"># 多列group by单列聚合</span></span><br><span class="line">awk <span class="string">&#x27;&#123;a[$2&quot; &quot;$3]+=$5&#125;END&#123;for(i in a) printf &quot;%s %10.3f\n&quot;,i,a[i]&#125;&#x27;</span> c.txt <span class="comment"># 求和</span></span><br><span class="line">awk <span class="string">&#x27;&#123;a[$2&quot; &quot;$3]+=1&#125;END&#123;for(i in a) printf &quot;%s %10.3f\n&quot;,i,a[i]&#125;&#x27;</span> c.txt <span class="comment"># 计数</span></span><br><span class="line">awk <span class="string">&#x27;&#123;s[$2&quot; &quot;$3]+=$5;n[$2&quot; &quot;$3]+=1&#125;END&#123;for(i in s)&#123;avg_v=s[i]/n[i];printf &quot;%s %10.3f\n&quot;,i,avg_v&#125;&#125;&#x27;</span> c.txt <span class="comment"># 平均</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 多列group by多列聚合：多来一个数组</span></span><br><span class="line">awk <span class="string">&#x27;&#123;a[$2&quot; &quot;$3]+=$5;b[$2&quot; &quot;$3]+=$6&#125;END&#123;for(i in a) printf &quot;%s %14.3f %14.3f\n&quot;,i,a[i],b[i]&#125;&#x27;</span> c.txt</span><br></pre></td></tr></table></figure>
<p>awk -F’ ‘ ‘/from/{print}’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;for(i=0;++i&lt;=NF;)a[i]=a[i]?a[i] FS $i:$i&#125;END&#123;for(i=0;i++&lt;NF;)printf a[i]&quot;\b \n&quot;&#125;&#x27; </span><br></pre></td></tr></table></figure>
<h2 id="5-正则表达式"><a href="#5-正则表达式" class="headerlink" title="5. 正则表达式"></a>5. 正则表达式</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/myyan/p/4765683.html">awk 正则表达式、正则运算符详细介绍</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chengmo/archive/2010/10/10/1847287.html">linux shell 正则表达式(BREs,EREs,PREs)差异比较</a></p>
<h3 id="1"><a href="#1" class="headerlink" title="1). +"></a>1). +</h3><p>指定如果<strong>一个或多个字符</strong>或扩展正则表达式的具体值（在 +（加号）前）在这个字符串中，则字符串匹配。</p>
<p>命令行：<code>awk &#39;/smith+ern/&#39; testfile</code></p>
<p>将包含字符 smit，后跟一个或多个 h 字符，并以字符 ern 结束的字符串的任何记录打印至标准输出。</p>
<p>此示例中的输出是：smithern, harry smithhern, anne</p>
<h3 id="2"><a href="#2" class="headerlink" title="2). ?"></a>2). ?</h3><p>指定如果<strong>零个或一个字符</strong>或扩展正则表达式的具体值（在 ?（问号）之前）在字符串中，则字符串匹配。</p>
<p>命令行： <code>awk &#39;/smith?/&#39; testfile</code></p>
<p>将包含字符 <code>smit</code>，后跟零个或一个 <code>h</code> 字符的实例的所有记录打印至标准输出。</p>
<p>此示例中的输出是：smith, alan smithern, harry smithhern, anne smitters, alexis</p>
<h3 id="3"><a href="#3" class="headerlink" title="3). |"></a>3). |</h3><p>指定如果以 |（垂直线）隔开的字符串的<strong>任何一个在字符串中</strong>，则字符串匹配。</p>
<p>命令行：<code>awk &#39;/allen | alan /&#39; testfile</code></p>
<p>将包含字符串 allen 或 alan 的所有记录打印至标准输出。</p>
<p>此示例中的输出是：smiley, allen smith, alan</p>
<h3 id="4"><a href="#4" class="headerlink" title="4). ()"></a>4). ()</h3><p>在正则表达式中将字符串组合在一起。</p>
<p>命令行： <code>awk &#39;/a(ll)?(nn)?e/&#39; testfile</code></p>
<p>将具有字符串 <code>ae</code> 或 <code>alle</code> 或 <code>anne</code> 或 <code>allnne</code> 的所有记录打印至标准输出。</p>
<p>此示例中的输出是：smiley, allen smithhern, anne</p>
<h3 id="5-m"><a href="#5-m" class="headerlink" title="5). {m}"></a>5). {m}</h3><p>指定如果<strong>正好有 m 个模式的具体值位于字符串中</strong>，则字符串匹配。</p>
<p>命令行：awk ‘/l{2}/‘ testfile</p>
<p>打印至标准输出：smiley, allen</p>
<h3 id="6-m"><a href="#6-m" class="headerlink" title="6). {m,}"></a>6). {m,}</h3><p>指定如果<strong>至少 m 个模式的具体值在字符串中</strong>，则字符串匹配。</p>
<p>命令行：<code>awk &#39;/t&#123;2,&#125;/&#39; testfile</code></p>
<p>打印至标准输出：smitters, alexis</p>
<h3 id="7-m-n"><a href="#7-m-n" class="headerlink" title="7). {m, n}"></a>7). {m, n}</h3><p>指定如果 <strong>m 和 n 之间（包含的 m 和 n）个模式</strong>的具体值在字符串中（其中m&lt;= n），则字符串匹配。</p>
<p>命令行：<code>awk &#39;/er&#123;1, 2&#125;/&#39; testfile</code></p>
<p>打印至标准输出：smithern, harry smithern, anne smitters, alexis</p>
<h3 id="8-String"><a href="#8-String" class="headerlink" title="8). [String]"></a>8). [String]</h3><p>指定正则表达式与方括号内 <strong>String 变量指定的任何字符匹配</strong>。</p>
<p>命令行：<code>awk &#39;/sm[a-h]/&#39; testfile</code></p>
<p>将具有 <code>sm</code> 后跟以字母顺序从 <code>a</code> 到 <code>h</code> 排列的任何字符的所有记录打印至标准输出。</p>
<p>此示例的输出是：smawley, andy</p>
<h3 id="9-String"><a href="#9-String" class="headerlink" title="9). [^ String]"></a>9). [^ String]</h3><p>在 [ ]（方括号）和在指定字符串开头的 ^ (插入记号) 指明<strong>正则表达式与方括号内的任何字符不匹配。</strong></p>
<p>命令行：<code>awk &#39;/sm\[^a-h]/&#39; testfile</code></p>
<p>打印至标准输出：smiley, allen smith, alan smithern, harry smithhern, anne smitters, alexis</p>
<h3 id="10"><a href="#10" class="headerlink" title="10). ~, !~"></a>10). ~, !~</h3><p>表示<strong>指定变量与正则表达式**</strong>匹配<strong>（~）或</strong>不匹配**（!~）的条件语句。</p>
<p>命令行：<code>awk &#39;$1 ~ /n/&#39; testfile</code></p>
<p>将第一个字段包含字符 <code>n</code> 的所有记录打印至标准输出。</p>
<p>此示例中的输出是：smithern, harry smithhern, anne</p>
<h3 id="11"><a href="#11" class="headerlink" title="11). ^"></a>11). ^</h3><p><strong>指定</strong>字段或记录的<strong>开头</strong>。</p>
<p>命令行： awk ‘$2 ~ /^h/‘ testfile</p>
<p>将把字符 <code>h</code> 作为第二个字段的第一个字符的所有记录打印至标准输出。</p>
<p>此示例中的输出是：smithern, harry</p>
<h3 id="12"><a href="#12" class="headerlink" title="12). $"></a>12). $</h3><p><strong>指定</strong>字段或记录的<strong>末尾</strong>。</p>
<p>命令行： awk ‘$2 ~ /y$/‘ testfile</p>
<p>将把字符 <code>y</code> 作为第二个字段的最后一个字符的所有记录打印至标准输出。</p>
<p>此示例中的输出是：smawley, andy smithern, harry</p>
<h3 id="13-（句号）"><a href="#13-（句号）" class="headerlink" title="13). .（句号）"></a>13). .（句号）</h3><p><strong>表示</strong>除了在空白末尾的终端换行字符以外的<strong>任何一个字符</strong>。</p>
<p>命令行： awk ‘/a..e/‘ testfile</p>
<p>将具有以两个字符隔开的字符 <code>a</code> 和 e 的所有记录打印至标准输出。</p>
<p>此示例中的输出是：smawley, andy smiley, allen smithhern, anne</p>
<h3 id="14-（星号）"><a href="#14-（星号）" class="headerlink" title="14). *（星号）"></a>14). *（星号）</h3><p>表示<strong>零个或更多的任意字符。</strong></p>
<p>命令行： awk ‘/a.*e/‘ testfile</p>
<p>将具有以零个或更多字符隔开的字符 <code>a</code> 和 e 的所有记录打印至标准输出。</p>
<p>此示例中的输出是：smawley, andy smiley, allen smithhern, anne smitters, alexis</p>
<h3 id="15-反斜杠"><a href="#15-反斜杠" class="headerlink" title="15). \ (反斜杠)"></a>15). \ (反斜杠)</h3><p>转义字符。当位于在扩展正则表达式中具有特殊含义的任何字符之前时，转义字符除去该字符的任何特殊含义。</p>
<p>例如，命令行： /a\/\//</p>
<p>将与模式 a // 匹配，因为反斜杠否定斜杠作为正则表达式定界符的通常含义。要将反斜杠本身指定为字符，则使用双反斜杠。有关反斜杠及其使用的更多信息，请参阅以下关于转义序列的内容。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2019/12/04/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/final_cut_pro%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/04/0_%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3/final_cut_pro%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-12-04 11:32:02" itemprop="dateCreated datePublished" datetime="2019-12-04T11:32:02+08:00">2019-12-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>快捷键：</p>
<p>i</p>
<p>o</p>
<p>e</p>
<p>d</p>
<p>B:切割</p>
<p>A：选择</p>
<p>T：修建</p>
<p>cmmand+-</p>
<p>shif+z:自动缩放</p>
<p>ctrl+T: 基本字幕</p>
<h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><ul>
<li>资源库：最高文件夹</li>
<li>事件</li>
<li>项目：影片名字</li>
</ul>
<h1 id="插入快捷键"><a href="#插入快捷键" class="headerlink" title="插入快捷键"></a>插入快捷键</h1><p>选择素材，按快捷键</p>
<p>Q: 插到时间轴所在位置,有视频的话会在新时间线</p>
<p>W:插到当前事件轴位置，分隔</p>
<p><strong>E</strong>：插到时间线最后</p>
<p>D：覆盖到时间轴位置</p>
<h1 id="精修快捷键"><a href="#精修快捷键" class="headerlink" title="精修快捷键"></a>精修快捷键</h1><p>B: 切割</p>
<p>A：选择</p>
<p>shif：连续多选</p>
<p>右键生成复合片段：合并片段</p>
<h1 id="多轨道剪辑"><a href="#多轨道剪辑" class="headerlink" title="多轨道剪辑"></a>多轨道剪辑</h1><p><strong>主序列片段只有一个，移动主序列片段时会影响其他序列的片段</strong></p>
<h1 id="转场"><a href="#转场" class="headerlink" title="转场"></a>转场</h1><p>直接拖到两个片段之间，呈灰色即转场成功</p>
<p>可在检查器设置转场参数</p>
<h1 id="字幕"><a href="#字幕" class="headerlink" title="字幕"></a>字幕</h1><p>基本字幕</p>
<h1 id="音画匹配"><a href="#音画匹配" class="headerlink" title="音画匹配"></a>音画匹配</h1><ul>
<li>右键—&gt; 分离音频</li>
</ul>
<h1 id="关键帧"><a href="#关键帧" class="headerlink" title="关键帧"></a>关键帧</h1><pre><code>- 对某个属性打两个关键帧，可实现该属性过度
</code></pre><h1 id="速率和方向"><a href="#速率和方向" class="headerlink" title="速率和方向"></a>速率和方向</h1><p>contrl+option+r: 调整速度</p>
<h1 id="聚焦-抠像-遮罩"><a href="#聚焦-抠像-遮罩" class="headerlink" title="聚焦 抠像 遮罩"></a>聚焦 抠像 遮罩</h1><p>聚焦：模糊分类中</p>
<h1 id="主要情节"><a href="#主要情节" class="headerlink" title="主要情节"></a>主要情节</h1><p>主要时间轴：右键—&gt; 从故事情节提取</p>
<p>非主要-》主要：右键—&gt; 覆盖至主要故事情节</p>
<h1 id="声音"><a href="#声音" class="headerlink" title="声音"></a>声音</h1><ul>
<li>合成异常</li>
<li>No</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Dongdong Wang</p>
  <div class="site-description" itemprop="description">从爪印判断，这是头雄狮</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">65</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:wangdongdong122@163.com" title="E-Mail → mailto:wangdongdong122@163.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        <div class="wechat_OA">
            <span>欢迎加微信讨论</span>
            <br>
            <!-- 这里添加你的二维码图片 -->
            <img src ="/images/wechat.png" style="zoom:40%;" />
        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dongdong Wang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>


        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  













<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

</body>
</html>
