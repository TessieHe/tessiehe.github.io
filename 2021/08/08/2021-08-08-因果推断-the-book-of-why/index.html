<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wangdongdong122.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="记录学习《因果之书》的笔记。">
<meta property="og:type" content="article">
<meta property="og:title" content="因果推断：the book of why">
<meta property="og:url" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/index.html">
<meta property="og:site_name" content="凛冬将至">
<meta property="og:description" content="记录学习《因果之书》的笔记。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210807163727974-1628325552533.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808103010446.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808131455727.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808131717441.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808133506939.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808170719233.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145736231.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145524642.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210809214449045.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145630481.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145659844.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145809152.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808150116299.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808150517716.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808154124101.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808160721150.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808172100062.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210809220700019.png">
<meta property="og:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210809001807145.png">
<meta property="article:published_time" content="2021-08-08T01:30:35.000Z">
<meta property="article:modified_time" content="2021-08-24T16:24:23.886Z">
<meta property="article:author" content="Dongdong Wang">
<meta property="article:tag" content="因果推断">
<meta property="article:tag" content="因果之书">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210807163727974-1628325552533.png">

<link rel="canonical" href="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>因果推断：the book of why | 凛冬将至</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">凛冬将至</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">从简单的例子开始</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wangdongdong122.github.io/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dongdong Wang">
      <meta itemprop="description" content="从爪印判断，这是头雄狮">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凛冬将至">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          因果推断：the book of why
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-08 09:30:35" itemprop="dateCreated datePublished" datetime="2021-08-08T09:30:35+08:00">2021-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-08-25 00:24:23" itemprop="dateModified" datetime="2021-08-25T00:24:23+08:00">2021-08-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>记录学习《因果之书》的笔记。</p>
<span id="more"></span>
<h2 id="因果关系介绍"><a href="#因果关系介绍" class="headerlink" title="因果关系介绍"></a>因果关系介绍</h2><h3 id="因果关系"><a href="#因果关系" class="headerlink" title="因果关系"></a>因果关系</h3><p>因果关系的定义一直是个哲学问题，作为一个不可知论者，我一直觉得因果关系涉及最基本的哲学，是<strong>不可知</strong>的。下雨后草木生长，按照唯物主义观点，下雨是因，草木生长是果；但是如果上帝存在，上次可能是希望草木生长所以创造了雨，才会下雨，因果似乎颠倒了。</p>
<p>我们现实生活中常常也有此类的描述，我们要去吃饭是因为要填饱肚子，填饱肚子是我们要去吃饭的原因。这里的因果似乎也有点奇怪，当存在一个<strong>有意识，有目的，有预测能力</strong>的主体时，其可能会根据因果关系来决定行为，这种情况下“因果关系”（预测结果）是”因”发生的原因。</p>
<p>​    </p>
<p>看一下哲学家给出过的定义</p>
<ul>
<li>亚里士多德：“质料因”“形式因”“动力因”“目的因”</li>
<li>休谟：我们可以给一个因下定义说，它是<strong>先行于</strong>、接近于另一个对象的一个对象，而且在这里，凡与前一个对象类似的一切对象都和与后一个对象类似的那些对象处在类似的先行关系和接近关系中。或者，换言之，<strong>假如</strong>没有前一个对象，那么后一个对象就不可能存在。</li>
</ul>
<p>​    </p>
<p><strong>时间先后</strong>的引入可以避免很多问题。很多地方也引入这个约束，比如在信号与系统里，对因果系统的定义是：”零状态响应不出现在激励之前的系统为因果系统”，简单说就是，输入引起的响应不出现在输入之前。因此当时间只能单向流动的规则被打破之后，因果关系开始模糊，变得难以理解。比如星际穿越中，未来的人类掌握了五维空间的黑洞，时间变成一个维度，可以在其中移动。未来的人类放了一个五维黑洞，所以现在的人类可以继续研究，生存下来才会有未来的人类。</p>
<p>不过本文不讨论<strong>因果发现问题</strong>，只讨论在给定因果关系的假设下，<strong>因果效应的量化</strong>问题和<strong>潜在结果</strong>的计算。</p>
<p>近年来，因果推断越来越火，相关方向的paper越来越多，业界也开始有越来越多相关的方向。</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210807163727974-1628325552533.png" class="" title="学术热度">
<p>​    </p>
<h3 id="因果与相关"><a href="#因果与相关" class="headerlink" title="因果与相关"></a>因果与相关</h3><p><strong>相关关系不能说明有因果关系</strong>，一个典型的案例是小孩的阅读能力和年龄有关，衣服的大小也有年龄有关，导致衣服大小也与阅读能力有相关性。但两者之间显然没有因果关系，给小孩穿更大的衣服不会提升其阅读能力。</p>
<p>那么如果给我们10000个小孩的年龄、衣服大小、阅读能力得分，10000行×3列的数据，我们如何只根据数据判断三者之间的因果关系呢？答案是不行，年龄和衣服大小之间的相关性没有方向，如果不结合日常生活的常识，我们无法只通过数据判断谁是因谁是果。</p>
<ul>
<li>统计学本身无法告诉哪个是因，哪个是果</li>
</ul>
<p><strong>人类的理解世界是以因果关系为基础</strong>而非统计关系，这对应人类做决策判断至关重要。当我们想达到某个结果Y而做一件事X时，实际是因为我们相信做了X，会让Y发生的概率变大，而这正是因果关系而非相关关系。这还有一个可能的原因是<strong>因果关系比相关关系稳健</strong>，相关关系太受各种因素影响，不够稳定，比如观测的范围的偏差、X变量的分布；相对而言，因果关系更多的是直接由客观规律和事情发生的机制直接决定的，接近于<strong>逻辑与规律</strong>的概念，通用性更强。</p>
<ul>
<li>人类为什么不一样，人类的直觉是以因果关系而统计关系为组织核心</li>
<li>深度学习只是让机器具备了高超的能力，而非智能，其致力于拟合出一个函数</li>
<li>相关性关系并不稳定，但因果关系却更为稳健</li>
</ul>
<p>​    </p>
<h3 id="因果与贝叶斯"><a href="#因果与贝叶斯" class="headerlink" title="因果与贝叶斯"></a>因果与贝叶斯</h3><p>贝叶斯网络并未假设箭头有任何因果意义，只意味着前向概率</p>
<p>贝叶斯网络和因果图的区别：</p>
<ul>
<li>贝叶斯网络并未假设箭头有任何因果意义（所以箭头的方向可以反过来？）</li>
<li>贝叶斯网络中箭头A-&gt;B，B的概率通过条件概率与A的值相关，且该相关关系是完备的（p144）</li>
<li>因果图中箭头A-&gt;B，在假设实验角度解释，表示如果我只调整A，就可以看到C的概率发生变化（p145）</li>
</ul>
<p>​    </p>
<h2 id="因果关系的表示"><a href="#因果关系的表示" class="headerlink" title="因果关系的表示"></a>因果关系的表示</h2><h3 id="三节点网络"><a href="#三节点网络" class="headerlink" title="三节点网络"></a>三节点网络</h3><p>三种基本的三节点网络</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808103010446.png" class="" title="三节点网络">
<p>​    </p>
<p><strong>案例</strong></p>
<p>链式：火灾 → 烟雾 → 警报</p>
<p>叉式：鞋子尺寸 ← 孩子的年龄 → 阅读能力</p>
<p>对撞：才华 → 名人 ← 美貌；名人才华与美貌负相关</p>
<p>​    </p>
<p><strong>独立性质</strong></p>
<p>链式：A与C不独立；给定B后，A与C独立，其中B为中介物</p>
<p>叉式：A与C不独立；给定B后，A与C独立</p>
<p>对撞：A与C独立；给定B后，A与C不独立</p>
<p>​    </p>
<p>注：</p>
<ul>
<li><p>上述独立性，建立在三节点网络已经是完备因果图的基础上</p>
</li>
<li><p>各个节点都可能还有原因，但这个原因不影响其他变量即可不表示为节点</p>
</li>
<li><p>我们不能通过数据区分链式和叉式接合，因为他们具有相同的条件独立性</p>
</li>
</ul>
<p>​    </p>
<h3 id="独立性质证明"><a href="#独立性质证明" class="headerlink" title="独立性质证明"></a>独立性质证明</h3><p><strong>背景知识</strong></p>
<p>概率全展开公式</p>
<script type="math/tex; mode=display">
p(x_1,…,x_K)=p(x_K│x_1,…,x_{K−1}),…,p(x_2|x_1)p(x_1)</script><p>该公式对应全连接有向无环图，任意两个节点之间都有连接。</p>
<p>有向图中：变量（节点）的条件概率与其父节点相关联，且此相关关系是充分的（即其他祖先不会影响这一公式）</p>
<script type="math/tex; mode=display">
p(\boldsymbol x)=\prod_{k=1}^K p(x_k|pa_k)</script><p>其中，$p(x)$表示所有节点的联合分布，k表示第k个节点，$pa_k$表示第k个节点的所有父节点。（PRML，P382）</p>
<p>​    </p>
<p><strong>链式证明</strong></p>
<p>​    </p>
<h2 id="后门路径"><a href="#后门路径" class="headerlink" title="后门路径"></a>后门路径</h2><h3 id="混杂定义"><a href="#混杂定义" class="headerlink" title="混杂定义"></a>混杂定义</h3><p>关于混杂的定义有很多，这里不再展开解释，给出一个本文的定义</p>
<ul>
<li>混杂偏倚（confounding bias）：$p(y|x)≠p(y|do(x))$</li>
</ul>
<p>比如给土壤质量差的土地施肥的情况下，肥料和产量之间存在混杂；由于随年龄的变化，人对运动的偏好有明显差异，此时运动和死亡率之间也存在混杂。</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808131455727.png" class="" title="混杂案例">
<p>要消除这种混杂，可以做随机测试，抽签决定每块土地是否施肥，此时就可以消除这个场景中的混杂。</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808131717441.png" class="" title="随机实验">
<p>这里可以消除混杂是因为抽签和产量之间没有因果关系，在这个实验中应该是没问题的。但在一些医学问题中，由于安慰剂效应，抽签结果可能还是会影响病人康复情况，所以要进行双盲实验。</p>
<p>​    </p>
<h3 id="后门路径-1"><a href="#后门路径-1" class="headerlink" title="后门路径"></a>后门路径</h3><p>书中对后门路径的定义是：<strong>X到Y之间所有的路径中，以指向X的箭头开始的路径</strong>。</p>
<blockquote>
<p>按照这个定义，包含对撞的路径不算后门路径，这会导致我们需要单独判断对撞是否产生偏倚。个人认为可以将包含<strong>指向X方向的箭头的路径</strong>定义为后门路径，这样就包括了对撞路径，一起判断就可以。</p>
</blockquote>
<p>​    </p>
<p><strong>阻断信息规则</strong>（只针对路径上的信息流动）</p>
<ol>
<li>链式（A-&gt;B-&gt;C）、叉式（A&lt;-B-&gt;C）：控制B可阻断A和C间信息流动</li>
<li>对撞（A-&gt;B&lt;-C）：A和C本身就是阻断的（控制B将导致信息流通）</li>
<li>控制一个变量的后代节点，将“部分地”控制变量本身</li>
</ol>
<p>​    </p>
<p><strong>去除混杂规则</strong></p>
<p>阻断了所有的后门路径，则完成了X和Y的去混杂</p>
<p>去混因子：一个可以阻断干预与结果之间所有后门路径的变量集</p>
<p>​    </p>
<p>如果将X和Y之间所有的路径分为三种，对应的<strong>去混杂的原则</strong>如下</p>
<ol>
<li>因果路径：反映了X→Y的因果关系，不应该被阻断</li>
<li>后门路径：产生混杂，应该被阻断，阻断时不应该违反第一条</li>
<li>对撞路径：原本处于阻断状态，不应该再控制导致混杂，如果已经控制了，则需要再阻断该路径，阻断时不能违反前两条。</li>
</ol>
<p>比如下图，第一个，不应该控制Z，第二个和第三个都是Z和M都不应该被控制。从这些案例我们知道，并<strong>不是控制变量越多越好</strong>，基于观察数据的分析，什么变量需要控制，什么变量不需要控制需要基于因果图来确定。</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808133506939.png" class="" title="控制变量">
<p>​    </p>
<h3 id="解释悖论"><a href="#解释悖论" class="headerlink" title="解释悖论"></a>解释悖论</h3><h4 id="相亲对象"><a href="#相亲对象" class="headerlink" title="相亲对象"></a>相亲对象</h4><p>问题：你有没有发现，你的相亲对象要么笨，要么丑！</p>
<p>因果图：才华 → 和你约会 ← 颜值</p>
<p>解释：才华和颜值可能没什么相关性，但介绍给你相亲的人中，两者之间可能就有相关性。又笨又丑的多半也不会介绍给你，高富帅、白富美多半也不会。</p>
<p>​    </p>
<h4 id="邮件骗局"><a href="#邮件骗局" class="headerlink" title="邮件骗局"></a>邮件骗局</h4><p>问题：如果你收到预测股市涨跌的邮件，连续10次都是准的，第11次预测结果要收费，要不要买呢？</p>
<p>因果图：预测 → 命中 ← 股市</p>
<p>解释：可能是每次给10万人发随机的预测结果，这样也会有大概千分之一的人都预测对，这部分人的第11次预测结果和股市涨跌之间并没有什么因果关系。</p>
<p>​    </p>
<h4 id="出生体重悖论"><a href="#出生体重悖论" class="headerlink" title="出生体重悖论"></a>出生体重悖论</h4><p>悖论：出生体重轻的婴儿中，母亲吸烟的，死亡率低</p>
<p>因果图：</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808170719233.png" class="" title="出生体重悖论">
<p>解释：控制出生体重导致了偏倚，先天缺陷且母亲吸烟的，可能死亡的概率大很多。</p>
<p>​    </p>
<h4 id="辛普森悖论"><a href="#辛普森悖论" class="headerlink" title="辛普森悖论"></a>辛普森悖论</h4><p>悖论：辛普森医生发现一种新药，吃了的人比不吃的人发病率低（0.78 vs 0.83），但这种药似乎对男性和女性都有害，吃了的男性比不吃的男性发病率高（0.93 vs 0.87），吃了药的女性也比不吃药的女性发病率高（0.73 vs 0.69）。</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145736231.png" class="" title="辛普森悖论-数据">
<p>因果图：</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145524642.png" class="" title="辛普森悖论">
<p>解释：男女患病风险不同，对服药的票号也不同。</p>
<p>扩展：辛普森悖论反映的是整体的统计结果和分层的统计结果可能相反。那么是整体统计结果正确还是分层结果正确呢？不同情况下不一样，需要根据具体研究的问题和因果图来判断。</p>
<p>​    </p>
<h4 id="伯克利大学招生悖论"><a href="#伯克利大学招生悖论" class="headerlink" title="伯克利大学招生悖论"></a>伯克利大学招生悖论</h4><p>悖论：1973年，有学者发现伯克利大学招生的时候男女录取比例不一样，男生录取率明显高于女生，男生44%，女生35%。当时公众很关注男女歧视问题，怎么办，伯克利大学的招生是各个系自己定的，所以挨个系查。但是查完就懵了，因为每个系的招生：都有利于女生，实际结果也都是女生录取比例比男生高。</p>
<p>因果图：</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210809214449045.png" class="" title="伯克利大学招生悖论简化版">
<p>解释：也是一个辛普森悖论，女生喜欢申请难录取的院系，但此时院系不是混杂。</p>
<p>扩展：上图看起来似乎是学校不存在歧视，但实际上如果因果图没画全，院系不仅有性别歧视还有地域歧视。比如说自己的家乡只录取男生，其他地方只录取女生（觉得女生读书就是祸害），如下面的因果图，那也有可能得到完全一样的数据。所以说因果推断的问题不能只从数据中求解，相同的数据，不同的因果假设，得到的结论完全不同。</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145630481.png" class="" title="伯克利大学招生悖论">
<p>​    </p>
<h4 id="蒙提霍尔悖论"><a href="#蒙提霍尔悖论" class="headerlink" title="蒙提霍尔悖论"></a>蒙提霍尔悖论</h4><p>悖论：有三扇门，门后有车、山羊、山羊。你如果选中有车的门，车就归你。现在你选择了A门，主持人打开了另一扇后面有山羊的B门，问你是否要将你的选择换成C门。</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145659844.png" class="" title="蒙提霍尔悖论-场景">
<p>因果图：</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808145809152.png" class="" title="蒙提霍尔悖论">
<p>解释：答案是要换，不换1/3，换了2/3。直觉上理解车子在哪个门后面的概率似乎不会变，都一直是1/3，但实际上，得知主持人打开哪个门之后，你选的门和车子的位置之间是相关的。</p>
<p>​    </p>
<h2 id="因果效应量化"><a href="#因果效应量化" class="headerlink" title="因果效应量化"></a>因果效应量化</h2><h3 id="后门标准"><a href="#后门标准" class="headerlink" title="后门标准"></a>后门标准</h3><p><strong>使用条件</strong>：去混因子可观测</p>
<p>已掌握了变量的一个充分集（包含去混因子）的数据，可以用来阻断干预和结果之间的所有的后门路径。</p>
<p>​    </p>
<p><strong>后门调整公式</strong></p>
<script type="math/tex; mode=display">
P(Y|do(X))=∑_ZP(Z=z,X) P(Z=z)</script><blockquote>
<p>去混因子的各层中的因果效应的趋势是一致的（因为去混因子不影响因果效应，P235）</p>
</blockquote>
<p>​    </p>
<p><strong>做法</strong></p>
<ol>
<li>估计去混因子每个水平（分层）上，干预的平均因果效应</li>
<li>计算各层因果效应的加权平均值，权重为每层在总体中的分布频率</li>
</ol>
<ul>
<li>线性近似将问题大大简化了，每个因果效应都可以用一个数字来表示（P236）</li>
<li>偏回归系数暗中执行了后门调整（P239）</li>
</ul>
<p>​    </p>
<h3 id="前门标准"><a href="#前门标准" class="headerlink" title="前门标准"></a>前门标准</h3><p>以吸烟为例，假设研究人员可以测量吸烟者肺部的焦油沉积量，且吸烟只通过焦油沉淀引发癌症</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808150116299.png" class="" title="前门路径-吸烟案例">
<p>前门调整公式：</p>
<script type="math/tex; mode=display">
P(Y│do(X))=∑_ZP(Z=z,X)∑_XP(Y│X=x,Z=z)P(X=x)</script><p>在吸烟的案例中，X代表“吸烟”，Y代表“癌症”，Z代 表“焦油沉积”，U（在此例中显然没有出现在公式中）代表不可观测的变量，即“吸烟基因”。</p>
<p>​    </p>
<p><strong>使用条件</strong>：</p>
<p>X对Y的因果效应被一组变量C混杂，又被另一组变量M介导，并且中介变量M不受C的影响。（此处笔者认为M也应该不能有其他混杂）</p>
<p>​    </p>
<h3 id="do运算"><a href="#do运算" class="headerlink" title="do运算"></a>do运算</h3><blockquote>
<p>目标：消除do算子，只留下经典的概率表达式，如$P(Y|X)$</p>
</blockquote>
<p>do运算<strong>3条法则</strong></p>
<ol>
<li><p>如果我们观察到W与Y无关（可在给定其他变量Z的条件下），那么Y的概率分布就不会随W而变</p>
<script type="math/tex; mode=display">
P(Y|do(X),Z,W)=P(Y|do(X),Z)</script><p>如，$P(警报|do(烟雾),火灾)=P(警报|do(烟雾))$</p>
<p>本法则允许增加或删除某个观察结果。</p>
</li>
<li><p>如果变量集Z阻断了从X到Y的所有后门路径，则以Z为条件时，$do(X)$等同于$see(X)$</p>
<script type="math/tex; mode=display">
P(Y|do(X),Z)=P(Y|X,Z)</script><p>本法则允许用观察替换干预，或反之。</p>
</li>
<li><p>若X到Y没有因果路径，则可将$do(X)$从$P(Y|do(X))$中移除</p>
<script type="math/tex; mode=display">
P(Y|do(X),Z)=P(Y)</script><p>本法则允许删除或添加干预。</p>
</li>
</ol>
<p>​    </p>
<p><strong>案例</strong>：</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808150517716.png" class="" title="do运算案例">
<script type="math/tex; mode=display">
P(Y|do(X))=∑_ZP(Y|do(X),Z)P(Z=z|do(X))
                                   =∑_ZP(Y|X,Z=z)P(Z=z)</script><p>​    </p>
<h2 id="因果图下的新视角"><a href="#因果图下的新视角" class="headerlink" title="因果图下的新视角"></a>因果图下的新视角</h2><blockquote>
<p>本部分内容存在大量自己总结的内容，可能有误</p>
</blockquote>
<p>​    </p>
<h3 id="工具变量法"><a href="#工具变量法" class="headerlink" title="工具变量法"></a>工具变量法</h3><p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%86%85%E7%94%9F%E5%8F%98%E9%87%8F">内生变量</a>：所有与扰动项相关的解释变量都称为“内生变量”。$^{[1]}$</p>
<p>内生变量导致的问题：OLS得到的估计量不一致。</p>
<p>工具变量法：</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808154124101.png" class="" title="工具变量法">
<p>在线性假设下，$ab=r_{ZY},a=r_{ZX}$，因此，$b=r_{ZY}/r_{ZX}$。其中$r_{ZY}$ 表示Z在Y上回归线的斜率， $a$表示Z增加一个单位的干预将导致X增加 $a$个单位。</p>
<p>​    </p>
<h3 id="偏回归"><a href="#偏回归" class="headerlink" title="偏回归"></a>偏回归</h3><p><strong>FWL定理</strong></p>
<p>主要思想：剔除一个变量（如，月收入）对另一个变量（如，额度）的影响，对参数（如，额度对逾期的影响）进行更为精准的估计</p>
<p>FWL定理：</p>
<ul>
<li>对于多元线性回归模型: $y_i=a+b_1x_{1i}+b_2x_{2i}+b_3x_{3i}+\epsilon _i$</li>
<li>当$x_1 \leftrightarrow x_2$之间相互影响，会导致估计偏差，解决步骤如下：<ol>
<li>x1对其他x回归得到误差v：</li>
<li>y对其他的x回归得到误差w：</li>
<li>w对v回归得到系数η：</li>
</ol>
</li>
<li>$η$ 就是b1的无偏估计</li>
</ul>
<p>可理解为，$η$ 表示的是“额度中与月收入无关的部分”对“逾期率中与月收入无关的部分”的解释力</p>
<p><strong>与后门路径之间的关系</strong></p>
<p>偏回归系数 实际和控制其他变量之后，X对Y的影响 ；实际逻辑后门标准是一致的</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808160721150.png" class="" title="image-20210808160721150">
<ul>
<li>减去均值会影响偏置，但不影响斜率</li>
<li>该计算方式下，计算得到的相关性系数和后门标准一致：$P(Y│do(X))=∑_ZP(Z=z,X) P(Z=z)$</li>
<li>如果Z是中介值，偏回归系数应该不对应自然因果效应，而对应直接因果效应。</li>
</ul>
<p>​    </p>
<h2 id="反事实"><a href="#反事实" class="headerlink" title="反事实"></a>反事实</h2><p>本部分介绍如何计算出潜在结果</p>
<h3 id="潜在结果"><a href="#潜在结果" class="headerlink" title="潜在结果"></a>潜在结果</h3><p>什么是潜在结果(potential outcomes)？定义一个Y的潜在结果，$Y_{X=x}(u)$：假如X的取值为x，那么Y在个体u上的取值（<strong>个体层面</strong>上的定义）。</p>
<p>如何推断潜在结果？</p>
<p>给个案例：如果<strong>工资</strong>（S）由<strong>学历</strong>（ED，0：高中，1：大学，2，硕士）和<strong>工作经验</strong>（EX，年数）决定。现在有以下数据，问题是<strong>如果爱丽丝上大学了，工资是多少</strong>？</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210808172100062.png" class="" title="潜在结果-案例">
<p>​    </p>
<h3 id="常见错误做法"><a href="#常见错误做法" class="headerlink" title="常见错误做法"></a>常见错误做法</h3><p><strong>错误的做法是：将因果推断问题看作数据缺失问题</strong>，利用差值法填补空格，或者推断出缺失数据。</p>
<ul>
<li>错误方法1：匹配法<ul>
<li>做法：伯特、卡罗琳工作年限相同 → 伯特的$S_2=9700$，卡罗琳的$S_1=92500$。</li>
<li>存在问题：没有考虑学历和工作经验之间的影响</li>
</ul>
</li>
<li>错误做法2：线性回归<ul>
<li>做法：回归观测结果为：$S=65000+2500EX+5000ED$，因此爱丽丝有大学文凭时（EX=6，ED=1），S=85000</li>
<li>存在问题：没有考虑学历和工作经验之间的影响</li>
</ul>
</li>
</ul>
<p>​    </p>
<h3 id="奈曼-鲁宾因果模型"><a href="#奈曼-鲁宾因果模型" class="headerlink" title="奈曼-鲁宾因果模型"></a>奈曼-鲁宾因果模型</h3><p>先来看下两位大佬的合影（左Pearl，右Robins），后面我也会再写一篇Robin的书的学习笔记，这里只简单介绍一下其<strong>三个假设</strong>。</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210809220700019.png" class="" title="2014年，唐纳德·鲁宾（右）与本书第一作者（资料来源：照片由格雷斯·铉·金提供）">
<p>​    </p>
<h4 id="稳定性"><a href="#稳定性" class="headerlink" title="稳定性"></a>稳定性</h4><p>单位处理效应稳定：stable unittreatment value assumption，SUTVA</p>
<p>个体的处理效应稳定不变，和其他个体是否接受处理无关（大部分情况下是合理的）</p>
<p>​    </p>
<h4 id="一致性"><a href="#一致性" class="headerlink" title="一致性"></a>一致性</h4><p>无论是否主动接受到处理，其效应相同（无安慰剂效应）</p>
<p>​    </p>
<h4 id="可交换性"><a href="#可交换性" class="headerlink" title="可交换性"></a>可交换性</h4><p>又称可忽略性，ignorability</p>
<p>给定某组去混因子Z的值，$Y_X$独立于实际接受的处理X</p>
<p>​    </p>
<h3 id="结构因果模型"><a href="#结构因果模型" class="headerlink" title="结构因果模型"></a>结构因果模型</h3><p>在学历工资的案例中，如果我们使用结构因果模型，可以得到以下两个方程：</p>
<script type="math/tex; mode=display">
S=65000+2500×EX+5000×ED+U_S
\\
EX = 10-4×ED+U_{EX}</script><p>第一个式子看起来和直接求S在ED、EX上的回归得到的结果完全一样，但解释的含义不同：一旦我们生命方程是“结构的”，则该方程就反映了我们所认定的因果假设，即EX和ED是S的原因，且不存在$ED=f(EX，S，U_{ED})$，也就是说我们认为ED对EX或S不敏感。</p>
<p>其中该方程中，<strong>$U_s$和$U_{EX}$为特质因子，每个人不同</strong>，无法观测，但可以根据已观测到的数据推测出来（外展）。</p>
<p>使用结构模型推导反事实<strong>步骤</strong>：</p>
<ol>
<li><strong>外展</strong>：利用关于爱丽丝和其他员工的数据来估计爱丽丝的特质因子（idiosyncratic factors）：$U_s(爱丽丝)$和$U_{EX}(爱丽丝)$。</li>
<li><strong>干预</strong>：利用do算子改变模型，以反映我们提出的反事实假设，在这个案例中即，假如爱丽丝有大学学位：$ED(爱丽丝)=1$。</li>
<li><strong>预测</strong>：利用修改后的模型及有关外生变量（exogenous variables）的更新信息$U_S(爱丽丝)$、$U_{EX}(爱丽丝)$和$ED(爱丽丝)$来估算爱丽丝的工资水平。新的工资水平就等于$S_{ED=1}(爱丽丝)$</li>
</ol>
<p>​    </p>
<h3 id="因果关系细分"><a href="#因果关系细分" class="headerlink" title="因果关系细分"></a>因果关系细分</h3><p>必要因；充分因；充要因</p>
<p>​    </p>
<h2 id="中介效应"><a href="#中介效应" class="headerlink" title="中介效应"></a>中介效应</h2><p>中介分析为什么重要呢？因为其对我们弄清楚事情发生的真正机制至关重要。比如说人类对坏血病的认识，就是对其中介物的逐步认识。人们很早就知道柑橘类水果可以避免坏血病，但</p>
<p>​    </p>
<h3 id="直接、间接效应"><a href="#直接、间接效应" class="headerlink" title="直接、间接效应"></a>直接、间接效应</h3><p>给定：处理X、结果Y、中介物M，但扰动X而保持M恒定时，得到X对Y的<strong>直接效应</strong>。</p>
<p>保持X恒定，并将M增加到X增加1个单位的情况下M所能达到的量，则我们所看到的Y增量就是X对Y的<strong>间接效应</strong>。</p>
<p>​    </p>
<h3 id="受控直接效应"><a href="#受控直接效应" class="headerlink" title="受控直接效应"></a>受控直接效应</h3><p>CDE（controlled direct effect）</p>
<script type="math/tex; mode=display">
CDE(0)=P(Y=1|do(X=1),do(M=0))-P(Y=1|do(X=0),do(M=0))</script><p>同理也有$CDE(1)$。但直接保持中介物恒定，有时是过度对照试验，比如为了判断各个院系是否有性别歧视时，让一个热爱计算机的人去申请考古专业。</p>
<p>​    </p>
<h3 id="自然直接效应"><a href="#自然直接效应" class="headerlink" title="自然直接效应"></a>自然直接效应</h3><p>NDE（natural direct effect）：中介物按X=0的取值时，$do(X=1)$的因果效应</p>
<script type="math/tex; mode=display">
NDE=P(Y_{M=M_0}=1|do(X=1))-P(Y_{M=M_0}=1|do(X=0))</script><p>其中$M_0$表示：$do(X=0)$时，中介物M按其自然状态下的取值。</p>
<p>案例：伯克利大学招生中，如果一个女生将她的性别报告为“男性”，即$do(X=1)$，并让其申请自己想去的院系$M=M_0$的情况下录取概率相对于其将她的性别报告为“女性”的录取概率差。</p>
<p>​    </p>
<h3 id="自然间接效应"><a href="#自然间接效应" class="headerlink" title="自然间接效应"></a>自然间接效应</h3><p>NIE（natural indirect effect）：让X=0、中介物按X=1后的取值时的因果效应。</p>
<script type="math/tex; mode=display">
NIE=P(Y_{M=M_1}=1|do(X=0))-P(Y_{M=M_0}=1|do(X=0))</script><p>其中$M_1$表示：$do(X=1)$后，中介物M按其自然状态下的取值。</p>
<p>案例：作者朋友收养了一只叫黛西的狗子，天天在家里搞破坏，但主人收养了另外三只小猫之后，黛西不再搞破坏了。在小猫被送回收容所的几天后，黛西故态萌发，又开始搞破坏。在小猫在的时候，黛西长时间地被人密切监视，小猫离开后，就不再密切监督它。那么黛西不搞破坏的原因究竟是什么呢？这个问题中，NIE指的是，第一个概率指不引入其他宠物($X=0$)，但将中介物设置为引入其他宠物时会有的值($M=M_1$)，此时黛西的行为有所改善($Y=1$)的概率，第二个概率指正常情况下不引入其他动物时，黛西不搞破坏的概率。</p>
<img src="/2021/08/08/2021-08-08-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD-the-book-of-why/image-20210809001807145.png" class="" title="黛西">
<p>​    </p>
<h3 id="总效应"><a href="#总效应" class="headerlink" title="总效应"></a>总效应</h3><script type="math/tex; mode=display">总效应(X=0→X=1)=NDE(X=0→X=1)–NIE(X=1→X=0)</script><p>​    </p>
<h2 id="我的问题"><a href="#我的问题" class="headerlink" title="我的问题"></a>我的问题</h2><p>记录一下我在学习中想到的问题，以及我的一些想法。</p>
<p>​     </p>
<h3 id="随机测试可做因果发现吗"><a href="#随机测试可做因果发现吗" class="headerlink" title="随机测试可做因果发现吗"></a>随机测试可做因果发现吗</h3><p>似乎是可以的，但只能发现处理变量和其他变量之间的因果关系。</p>
<p>​     </p>
<h3 id="无法干预时的因果效应"><a href="#无法干预时的因果效应" class="headerlink" title="无法干预时的因果效应"></a>无法干预时的因果效应</h3><p>如果一个变量我们<strong>无法干预，还存在因果关系</strong>吗？这又如何理解？比如年龄→阅读能力，直接<strong>提高年龄会导致阅读能力的提升</strong>吗？</p>
<p>回答：</p>
<ul>
<li><p>这种情况下干预似乎就直接控制了中介因子。但这个是语言的问题，如果大家把年龄看做了自己身份证上的属性，甚至可以直接修改，那就应该把“年龄”替换为“出生年数”，因果关系变成：年龄←出生年数→阅读能力。</p>
</li>
<li><p>如果真的是完全没有可能干预呢？<strong>在Robin的潜在因果模型中，不讨论无法干预的因果效应！</strong></p>
</li>
</ul>
<p>​     </p>
<h3 id="因果图似乎不完备"><a href="#因果图似乎不完备" class="headerlink" title="因果图似乎不完备"></a>因果图似乎不完备</h3><p>在处理交叉影响时，因果图似乎不完备（或有问题）。如，女生更偏好难录取的院系，院长根据居住州和性别共同决定录取结果，只要家乡的男生，其他地方的女生。此时居住州对性别和院系都没有因果关系，即改变居住州，不会影响学生申请的院系或性别。所以因果图应该如下：</p>
<pre class="mermaid">graph LR
A[居住州] --> B((录取结果))
C(性别) --> B
C(性别) --> D{院系}
D{院系} --> B</pre>

<p>或者，在土壤和肥料的案例虽然做了随机测试，土地和肥料对产量的影响之间有交叉的，</p>
<p>​      </p>
<p><strong>参考信息</strong></p>
<p>[1] 《高级计量经济学及Stata应用》,（第二版），P136</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD/" rel="tag"># 因果推断</a>
              <a href="/tags/%E5%9B%A0%E6%9E%9C%E4%B9%8B%E4%B9%A6/" rel="tag"># 因果之书</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/08/05/2021-08-05-TensorFlow2.0%E4%BD%BF%E7%94%A8/" rel="prev" title="tf.function的使用">
      <i class="fa fa-chevron-left"></i> tf.function的使用
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%A0%E6%9E%9C%E5%85%B3%E7%B3%BB%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">因果关系介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%A0%E6%9E%9C%E5%85%B3%E7%B3%BB"><span class="nav-number">1.1.</span> <span class="nav-text">因果关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%A0%E6%9E%9C%E4%B8%8E%E7%9B%B8%E5%85%B3"><span class="nav-number">1.2.</span> <span class="nav-text">因果与相关</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%A0%E6%9E%9C%E4%B8%8E%E8%B4%9D%E5%8F%B6%E6%96%AF"><span class="nav-number">1.3.</span> <span class="nav-text">因果与贝叶斯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%A0%E6%9E%9C%E5%85%B3%E7%B3%BB%E7%9A%84%E8%A1%A8%E7%A4%BA"><span class="nav-number">2.</span> <span class="nav-text">因果关系的表示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E8%8A%82%E7%82%B9%E7%BD%91%E7%BB%9C"><span class="nav-number">2.1.</span> <span class="nav-text">三节点网络</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%B4%A8%E8%AF%81%E6%98%8E"><span class="nav-number">2.2.</span> <span class="nav-text">独立性质证明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8E%E9%97%A8%E8%B7%AF%E5%BE%84"><span class="nav-number">3.</span> <span class="nav-text">后门路径</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%B7%E6%9D%82%E5%AE%9A%E4%B9%89"><span class="nav-number">3.1.</span> <span class="nav-text">混杂定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8E%E9%97%A8%E8%B7%AF%E5%BE%84-1"><span class="nav-number">3.2.</span> <span class="nav-text">后门路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%87%8A%E6%82%96%E8%AE%BA"><span class="nav-number">3.3.</span> <span class="nav-text">解释悖论</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B8%E4%BA%B2%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.3.1.</span> <span class="nav-text">相亲对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%82%AE%E4%BB%B6%E9%AA%97%E5%B1%80"><span class="nav-number">3.3.2.</span> <span class="nav-text">邮件骗局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%BA%E7%94%9F%E4%BD%93%E9%87%8D%E6%82%96%E8%AE%BA"><span class="nav-number">3.3.3.</span> <span class="nav-text">出生体重悖论</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%9B%E6%99%AE%E6%A3%AE%E6%82%96%E8%AE%BA"><span class="nav-number">3.3.4.</span> <span class="nav-text">辛普森悖论</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%AF%E5%85%8B%E5%88%A9%E5%A4%A7%E5%AD%A6%E6%8B%9B%E7%94%9F%E6%82%96%E8%AE%BA"><span class="nav-number">3.3.5.</span> <span class="nav-text">伯克利大学招生悖论</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%92%99%E6%8F%90%E9%9C%8D%E5%B0%94%E6%82%96%E8%AE%BA"><span class="nav-number">3.3.6.</span> <span class="nav-text">蒙提霍尔悖论</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%A0%E6%9E%9C%E6%95%88%E5%BA%94%E9%87%8F%E5%8C%96"><span class="nav-number">4.</span> <span class="nav-text">因果效应量化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8E%E9%97%A8%E6%A0%87%E5%87%86"><span class="nav-number">4.1.</span> <span class="nav-text">后门标准</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E9%97%A8%E6%A0%87%E5%87%86"><span class="nav-number">4.2.</span> <span class="nav-text">前门标准</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#do%E8%BF%90%E7%AE%97"><span class="nav-number">4.3.</span> <span class="nav-text">do运算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%A0%E6%9E%9C%E5%9B%BE%E4%B8%8B%E7%9A%84%E6%96%B0%E8%A7%86%E8%A7%92"><span class="nav-number">5.</span> <span class="nav-text">因果图下的新视角</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E5%85%B7%E5%8F%98%E9%87%8F%E6%B3%95"><span class="nav-number">5.1.</span> <span class="nav-text">工具变量法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%8F%E5%9B%9E%E5%BD%92"><span class="nav-number">5.2.</span> <span class="nav-text">偏回归</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E4%BA%8B%E5%AE%9E"><span class="nav-number">6.</span> <span class="nav-text">反事实</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BD%9C%E5%9C%A8%E7%BB%93%E6%9E%9C"><span class="nav-number">6.1.</span> <span class="nav-text">潜在结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E5%81%9A%E6%B3%95"><span class="nav-number">6.2.</span> <span class="nav-text">常见错误做法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A5%88%E6%9B%BC-%E9%B2%81%E5%AE%BE%E5%9B%A0%E6%9E%9C%E6%A8%A1%E5%9E%8B"><span class="nav-number">6.3.</span> <span class="nav-text">奈曼-鲁宾因果模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A8%B3%E5%AE%9A%E6%80%A7"><span class="nav-number">6.3.1.</span> <span class="nav-text">稳定性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E8%87%B4%E6%80%A7"><span class="nav-number">6.3.2.</span> <span class="nav-text">一致性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E4%BA%A4%E6%8D%A2%E6%80%A7"><span class="nav-number">6.3.3.</span> <span class="nav-text">可交换性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E5%9B%A0%E6%9E%9C%E6%A8%A1%E5%9E%8B"><span class="nav-number">6.4.</span> <span class="nav-text">结构因果模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%A0%E6%9E%9C%E5%85%B3%E7%B3%BB%E7%BB%86%E5%88%86"><span class="nav-number">6.5.</span> <span class="nav-text">因果关系细分</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E4%BB%8B%E6%95%88%E5%BA%94"><span class="nav-number">7.</span> <span class="nav-text">中介效应</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B4%E6%8E%A5%E3%80%81%E9%97%B4%E6%8E%A5%E6%95%88%E5%BA%94"><span class="nav-number">7.1.</span> <span class="nav-text">直接、间接效应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%97%E6%8E%A7%E7%9B%B4%E6%8E%A5%E6%95%88%E5%BA%94"><span class="nav-number">7.2.</span> <span class="nav-text">受控直接效应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E7%84%B6%E7%9B%B4%E6%8E%A5%E6%95%88%E5%BA%94"><span class="nav-number">7.3.</span> <span class="nav-text">自然直接效应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E7%84%B6%E9%97%B4%E6%8E%A5%E6%95%88%E5%BA%94"><span class="nav-number">7.4.</span> <span class="nav-text">自然间接效应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E6%95%88%E5%BA%94"><span class="nav-number">7.5.</span> <span class="nav-text">总效应</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%88%91%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">8.</span> <span class="nav-text">我的问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E6%B5%8B%E8%AF%95%E5%8F%AF%E5%81%9A%E5%9B%A0%E6%9E%9C%E5%8F%91%E7%8E%B0%E5%90%97"><span class="nav-number">8.1.</span> <span class="nav-text">随机测试可做因果发现吗</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A0%E6%B3%95%E5%B9%B2%E9%A2%84%E6%97%B6%E7%9A%84%E5%9B%A0%E6%9E%9C%E6%95%88%E5%BA%94"><span class="nav-number">8.2.</span> <span class="nav-text">无法干预时的因果效应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%A0%E6%9E%9C%E5%9B%BE%E4%BC%BC%E4%B9%8E%E4%B8%8D%E5%AE%8C%E5%A4%87"><span class="nav-number">8.3.</span> <span class="nav-text">因果图似乎不完备</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Dongdong Wang</p>
  <div class="site-description" itemprop="description">从爪印判断，这是头雄狮</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:wangdongdong122@163.com" title="E-Mail → mailto:wangdongdong122@163.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        <div class="wechat_OA">
            <span>欢迎加微信讨论</span>
            <br>
            <!-- 这里添加你的二维码图片 -->
            <img src ="/images/wechat.png" style="zoom:40%;" />
        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dongdong Wang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>


        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  













<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
