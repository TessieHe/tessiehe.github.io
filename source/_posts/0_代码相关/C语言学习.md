---
title: C语言学习
date: 2022-03-01 11:32:38
tags:
    - 代码相关
    - default
categories: 
    - 代码相关
---

C语言入门

<!-- more -->


[TOC]

# 环境与入门

## 实例代码

```c
#include <stdio.h>
int main()
{
   /* 我的第一个 C 程序 */
   printf("Hello, World! \n");
   
   return 0;
}
```

1. 程序的第一行 *#include <stdio.h>* 是**预处理器指令**，告诉 C 编译器在实际编译之前要包含 stdio.h 文件。
2. 下一行 *int main()* 是主函数，程序从这里开始执行。
3. 下一行 /*...*/ 将会被编译器忽略，这里放置程序的注释内容。它们被称为程序的注释。
4. 下一行 *printf(...)* 是 C 中另一个可用的函数，会在屏幕上显示消息 "Hello, World!"。
5. 下一行 **return 0;** 终止 main() 函数，并返回值 0。

##  编译&执行C程序

1. 开一个文本编辑器，添加上述代码。
2. 保存文件为 *hello.c*。
3. 打开命令提示符，进入到保存文件所在的目录。
4. 键入 *gcc hello.c*，输入回车，编译代码。
5. 如果代码中没有错误，命令提示符会跳到下一行，并生成 *a.out* 可执行文件。
6. 现在，键入 *a.out* 来执行程序。

```shell
gcc hello.c
./a.out
```

如果是多个 c 代码的源码文件，编译方法如下：

```
$ gcc test1.c test2.c -o main.out
$ ./main.out
```

test1.c 与 test2.c 是两个源代码文件

# C语言基本语法

## 注释

```c
//单行注释
/* 单行注释 */
/* 
 多行注释
 多行注释
 多行注释
 */
```

必须以分号结尾

## printf

```c
#include <stdio.h>
int main()
{
    printf("打印整数 ： %d \n",2)
}
```



| 格式字符 | 意义                                       |
| :------- | :----------------------------------------- |
| d        | 以十进制形式输出带符号整数(正数不输出符号) |
| o        | 以八进制形式输出无符号整数(不输出前缀0)    |
| x,X      | 以十六进制形式输出无符号整数(不输出前缀Ox) |
| u        | 以十进制形式输出无符号整数                 |
| f        | 以小数形式输出单、双精度实数               |
| e,E      | 以指数形式输出单、双精度实数               |
| g,G      | 以%f或%e中较短的输出宽度输出单、双精度实数 |
| c        | 输出单个字符                               |
| s        | 输出字符串                                 |
| p        | 输出指针地址                               |
| lu       | 32位无符号整数                             |
| llu      | 64位无符号整数                             |

## C数据类型

| 序号 | 类型与描述                                                   |
| :--- | :----------------------------------------------------------- |
| 1    | **基本类型：** 它们是算术类型，包括两种类型：整数类型和浮点类型。 |
| 2    | **枚举类型：** 它们也是算术类型，被用来定义在程序中只能赋予其一定的离散整数值的变量。 |
| 3    | **void 类型：** 类型说明符 *void* 表明没有可用的值。         |
| 4    | **派生类型：** 它们包括：指针类型、数组类型、结构类型、共用体类型和函数类型。 |

一个bite占8bit

| 类型        | 存储大小    | 值范围                                               |
| :---------- | :---------- | :--------------------------------------------------- |
| char        | 1 字节      | -128 到 127 或 0 到 255                              |
| int         | 2 或 4 字节 | -32,768 到 32,767 或 -2,147,483,648 到 2,147,483,647 |
| short       | 2 字节      | -32,768 到 32,767                                    |
| long        | 4 字节      | -2,147,483,648 到 2,147,483,647                      |
| float       | 4 字节      | 1.2E-38 到 3.4E+38                                   |
| double      | 8 字节      | 2.3E-308 到 1.7E+308                                 |
| long double | 16 字节     | 3.4E-4932 到 1.1E+4932                               |

## 变量的定义

变量只不过是程序可操作性的存储区的名称，每个变量有特定的类型，类型决定了变量存储的大小和布局

变量定义就是告诉编译器在何处创建变量的存储，以及如何创建变量的存储。

```c
int i,j,k;
```

## 变量的声明

变量声明向编译器保证变量以指定的类型和名称存在，这样编译器在不需要知道变量完整细节的情况下也能继续进一步的编译。变量声明只在编译时有它的意义，在程序连接时编译器需要实际的变量声明。

```c
extern int i; //声明，不是定义
int i; //声明，也是定义
```

变量的声明有两种情况：

- 1、一种是需要建立存储空间的。例如：int a 在声明的时候就已经建立了存储空间。

- 2、另一种是不需要建立存储空间的，通过使用extern关键字声明变量名而不定义它。 例如：extern int a 其中变量 a 可以在别的文件中定义的。

  除非有extern关键字，否则都是变量的定义。

> 如果需要在一个源文件中引用另外一个源文件中定义的变量，我们只需在引用的文件中将变量加上 extern 关键字的声明即可。

- C 中有两种类型的表达式：

  1. **左值（lvalue）：**指向内存位置的表达式被称为左值（lvalue）表达式。左值可以出现在赋值号的左边或右边。
  2. **右值（rvalue）：**术语右值（rvalue）指的是存储在内存中某些地址的数值。右值是不能对其进行赋值的表达式，也就是说，右值可以出现在赋值号的右边，但不能出现在赋值号的左边。

  变量是左值，因此可以出现在赋值号的左边。数值型的字面值是右值，因此不能被赋值，不能出现在赋值号的左边。  

## 整数常量

整数常量可以是十进制、八进制或十六进制的常量。前缀指定基数：0x 或 0X 表示十六进制，0 表示八进制，不带前缀则默认表示十进制。

整数常量也可以带一个后缀，后缀是 U 和 L 的组合，U 表示无符号整数（unsigned），L 表示长整数（long）。后缀可以是大写，也可以是小写，U 和 L 的顺序任意

>85         /* 十进制 */
0213       /* 八进制 */
0x4b       /* 十六进制 */
30         /* 整数 */
30u        /* 无符号整数 */
30l        /* 长整数 */
30ul       /* 无符号长整数 */

## 浮点常量

## 定义常量

```c
#define L1 10; //使用的覅额与处理器
count int a=10 ;
```

## 存储类

存储类定义 C 程序中变量/函数的范围（可见性）和生命周期。这些说明符放置在它们所修饰的类型之前。下面列出 C 程序中可用的存储类：auto , register, static , extern

```c
{
    auto int mount;
}
```



 ### auto 存储类

auto存储类是所有局部变量默认的存储类，只能修饰局部变量

 

### register 存储类

**register** 存储类用于定义存储在寄存器中而不是 RAM 中的局部变量。这意味着变量的最大尺寸等于寄存器的大小（通常是一个词），且不能对它应用一元的 '&' 运算符（因为它没有内存位置）。

>寄存器只用于需要快速访问的变量，比如计数器

### static 存储类

**static** 存储类指示编译器在程序的生命周期内保持局部变量的存在，而不需要在每次它进入和离开作用域时进行创建和销毁。因此，

> 使用 static 修饰局部变量可以在函数调用之间保持局部变量的值。(只初始化一次)

static 修饰符也可以应用于全局变量。当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。

> 全局声明的一个 static 变量或方法可以被任何函数或方法调用，只要这些方法出现在跟 static 变量或方法同一个文件中。

### extern 存储类

**extern** 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。当您使用 **extern** 时，对于无法初始化的变量，会把变量名指向一个之前定义过的存储位置。

当您有多个文件且定义了一个可以在其他文件中使用的全局变量或函数时，可以在其他文件中使用 *extern* 来得到已定义的变量或函数的引用。可以这么理解，

> *extern* 是用来在另一个文件中声明一个全局变量或函数。

extern 修饰符通常用于当有两个或多个文件共享相同的全局变量或函数的时候，如下所示：

## 运算符

### 算数运算符

| /                                     | 分子除以分母，向下取整 |      |
| ------------------------------------- | ---------------------- | ---- |
| a++ 先赋值后运算 ； ++ a 先运算后赋值 |                        |      |

### 逻辑运算符

&&   ， ||  ， ！

### 杂项运算符

| 运算符   | 描述             | 实例                                                |
| :------- | :--------------- | :-------------------------------------------------- |
| sizeof() | 返回变量的大小。 | sizeof(a) 将返回 4，其中 a 是整数。                 |
| &        | 返回变量的地址。 | &a; 将给出变量的实际地址。                          |
| *        | 指向一个变量。   | *a; 将指向一个变量。（a为地址，*\*a为该地址的变量） |
| ? :      | 条件表达式       | 如果条件为真 ? 则值为 X : 否则值为 Y                |

## 判断

if , if...else ,  switch

C 语言把任何**非零**和**非空**的值假定为 **true**，把**零**或 **null** 假定为 **false**。

> 运算符(三元运算符):  Exp1 ? Exp2 : Exp3;
>
> 如果exp1为真 则运行exp2，否则运行exp3

## 循环

while ,  do ... while , for

> ``` c
> for ( init; condition; increment )
> {
>    statement(s);
> }
> ```

```c
#include <stdio.h>
 
int main ()
{
   /* for 循环执行 */
   for( int a = 10; a < 20; a = a + 1 )
   {
      printf("a 的值： %d\n", a);
   }
 
   return 0;
}
```

### 循环控制语句

| 控制语句                                                     | 描述                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [break 语句](https://www.runoob.com/cprogramming/c-break-statement.html) | 终止**循环**或 **switch** 语句，程序流将继续执行紧接着循环或 switch 的下一条语句。 |
| [continue 语句](https://www.runoob.com/cprogramming/c-continue-statement.html) | 告诉一个循环体立刻停止本次循环迭代，重新开始下次循环迭代。   |
| [goto 语句](https://www.runoob.com/cprogramming/c-goto-statement.html) | 将控制转移到被标记的语句。但是不建议在程序中使用 goto 语句。 |

无限循环

```c
# include <stdio.h>

int main()
{
    for (;;)
    {
        printf("一直执行")
    }
}
```

## 函数

每个 C 程序都至少有一个函数，即主函数 **main()** 

函数还有很多叫法，比如方法、子例程或程序，等等。

```c
return_type function_name( parameter list )
{
   body of the function
}
```

在 C 语言中，函数由一个函数头和一个函数主体组成。下面列出一个函数的所有组成部分：

### 函数声明

在函数调用之前要进行声明

```c
return_type function_name( parameter list );
```

针对上面定义的函数 max()，以下是函数声明：

```
int max(int num1, int num2);
```

在函数声明中，参数的名称并不重要，只有参数的类型是必需的，因此下面也是有效的声明：

```
int max(int, int);
```

### 函数调用

传值调用，引用调用

```c
#include <stdio.h>
 
/* 函数声明 */
void swap(int *x, int *y); 
int main ()
{
   /* 局部变量定义 */
   int a = 100;
   int b = 200;
   printf("交换前，a 的值： %d\n", a );
   printf("交换前，b 的值： %d\n", b );
   /* 调用函数来交换值
    * &a 表示指向 a 的指针，即变量 a 的地址
    * &b 表示指向 b 的指针，即变量 b 的地址
   */
   swap(&a, &b);
   printf("交换后，a 的值： %d\n", a );
   printf("交换后，b 的值： %d\n", b );
   return 0;
}
```

## 作用域规则

**全局变量与局部变量在内存中的区别**：

- 全局变量保存在内存的全局存储区中，占用静态的存储单元；
- 局部变量保存在栈中，只有在所在函数被调用时才动态地为变量分配存储单元。

