---
title: 01_日期操作
date: 2022-03-01 11:32:38
tags:
    - 代码相关
    - default
categories: 
    - 代码相关
---



sql相关的日期操作

<!-- more -->




## 一、日期运算



### 1. date_add

```sql
select date_add('2017-09-15',1) ;
```

### 2. date_sub

```sql
select date_sub('2017-09-15',1);
```

### 3. datediff

```sql
select datediff('2017-09-15','2017-09-01');
```

### 4. add_months

```sql
select add_months('2017-02-27',-1);
-- 2017-01-27
select add_months('2017-02-01',-1);
-- 2017-01-01
select add_months('2017-02-28',-1);
-- 2017-01-31
```



### 5. last_day

```
select last_day('2018-09-22');
```



### 6. months_between

```sql
select months_between('2018-09-22','2018-08-02');
```



## 二、日期转换

### 1. to_date

```sql
select to_date('2017-09-15 11:12:00');
```



### 2. from_unixtime

时间戳转日期

```sql
--时间戳转日期
select from_unixtime(1505456567); 
select from_unixtime(1505456567,'yyyyMMdd'); 
select from_unixtime(1505456567,'yyyy-MM-dd HH:mm:ss'); 
select from_unixtime(unix_timestamp(),'yyyy-MM-dd HH:mm:ss'); --获取系统当前时间
```

方法1: from_unixtime+ unix_timestamp
--20171205转成2017-12-05 
select from_unixtime(unix_timestamp('20171205','yyyymmdd'),'yyyy-mm-dd') from dual;

--2017-12-05转成20171205
select from_unixtime(unix_timestamp('2017-12-05','yyyy-mm-dd'),'yyyymmdd') from dual;

方法2: substr + concat
--20171205转成2017-12-05 
select concat(substr('20171205',1,4),'-',substr('20171205',5,2),'-',substr('20171205',7,2)) from dual;

--2017-12-05转成20171205
select concat(substr('2017-12-05',1,4),substr('2017-12-05',6,2),substr('2017-12-05',9,2)) from dual;

————————————————
版权声明：本文为CSDN博主「开心果汁」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/u013421629/article/details/80068090

## 三、自动获取日期

### 1. current_date

```sql
--其他日期函数
--查询当前系统时间(包括毫秒数): 
select current_timestamp;  
-- 查询当月第几天: 
select dayofmonth(current_date);
-- 月末
select last_day(current_date);
-- 当月第1天
select date_sub(current_date,dayofmonth(current_date)-1);
-- 下个月第1天
select add_months(date_sub(current_date,dayofmonth(current_date)-1),1);
```



### 2. sysdate

```sql
select sysdate(-2) ;
```



### 3. unix_timestamp

时间戳函数

```sql
--日期转时间戳：从1970-01-01 00:00:00 UTC到指定时间的秒数
select unix_timestamp(); --获得当前时区的UNIX时间戳
select unix_timestamp('2017-09-15 14:23:00'); 
select unix_timestamp('2017-09-15 14:23:00','yyyy-MM-dd HH:mm:ss');
select unix_timestamp('20170915 14:23:00','yyyyMMdd HH:mm:ss'); 
```

### 4. 年月日

```
select year(dt),month(dt),day(dt),hour(dt),minute(dt),second(dt),weekofyear(dt);
```

### 5. trunc

获取月初、年初

>
> trunc(date,format)  format:MONTH/MON/MM, YEAR/YYYY/YY
>


```sql
select trunc('2018-09-27','YY') as date_time,trunc('2018-09-27 21:16:13','MM') as date_time1;

--date_time       date_time1
--2018-01-01      2018-09-01
```

### 6. next_day

当前日期下个星期X的日期

>
> next_day(date,formate) format:英文星期几的缩写或者全拼
>

```sql
select next_day('2018-09-27','TH') as date_time,next_day('2018-09-27 21:16:13','TU') as date_time1;
-- date_time       date_time1
-- 2018-10-04      2018-10-02
```

     2018-10-02
```

